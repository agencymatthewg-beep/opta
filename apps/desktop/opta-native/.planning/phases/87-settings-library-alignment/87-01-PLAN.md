---
phase: 87-settings-library-alignment
plan: 01
title: Settings Views Obsidian Refresh
subsystem: ui
wave: 1
autonomous: true
scope: small
tags: [swift, swiftui, obsidian-ui, branch-energy, settings]
---

# Plan 87-01: Settings Views Obsidian Refresh

## Objective

Migrate all Settings views to the obsidian aesthetic (0A0A0F base) with unified Electric Violet (#8B5CF6) accents. Unify multi-color quality badges to violet-based scheme and add branch-energy active states to interactive elements.

## Execution Context

### Patterns to Replicate (from Phase 86)
- Obsidian base: `Color(hex: "0A0A0F")`
- Electric Violet accent: `Color(hex: "8B5CF6")`
- Radial gradient highlights on hover/active states
- Reduce-motion fallback: solid 2px violet border instead of glow
- Container backgrounds: obsidian with subtle white/5% overlay for depth

### Key References
- `opta-native/OptaApp/OptaApp/Views/Components/CircularMenuView.swift` — obsidian + violet pattern
- `opta-native/OptaApp/OptaApp/Navigation/CircularMenuNavigation.swift` — unified violet color usage

## Context

### Current State
- **SettingsView.swift**: Standard macOS List with sections, SettingsRowView uses `Color(hex: "#8B5CF6")` for icons, `.ultraThinMaterial` for icon backgrounds. No custom list background.
- **ProfileManagerView.swift**: Multi-color quality badges (gray/blue/green/orange/purple based on level 0-4), some `#8B5CF6` accents already present. Uses various colored badges for profile quality tiers.
- **ThemeCustomizationView.swift**: Uses `#09090B` base and `#1F1F23` gray. Rainbow gradient for color picker. Configurable accent colors via `settings.accentColor`.
- **KeyboardShortcutsView.swift**: Already uses `#8B5CF6` throughout — minimal changes needed (only `09090B` → `0A0A0F`).

### Design Rules
- `09090B` → `0A0A0F` everywhere (obsidian migration)
- Multi-color quality badges → violet intensity variants (opacity-based tiers)
- `.ultraThinMaterial` icon backgrounds → obsidian `0A0A0F` with violet/10% border
- Section headers keep system styling (List handles them)
- "Reset" button stays `.red` (semantic destructive action)

## Tasks

### Task 1: SettingsView Obsidian Containers

**Files:** `opta-native/OptaApp/OptaApp/Views/SettingsView.swift`

**Changes:**
1. Add obsidian background to the List: `.scrollContentBackground(.hidden)` + `Color(hex: "0A0A0F")` background
2. Update `SettingsRowView` icon background from `.ultraThinMaterial` to `Color(hex: "0A0A0F")` with `Color(hex: "8B5CF6").opacity(0.15)` border
3. Add subtle section separator styling with `Color(hex: "8B5CF6").opacity(0.08)` dividers
4. Keep `.red` foreground on "Reset All Settings" button (semantic destructive color)

**Verification:** Build compiles, SettingsView renders with obsidian background

### Task 2: ProfileManagerView Unified Quality Badges

**Files:** `opta-native/OptaApp/OptaApp/Views/Settings/ProfileManagerView.swift`

**Changes:**
1. Replace multi-color quality badge system with violet intensity tiers:
   - Level 0 (Basic): `Color(hex: "8B5CF6").opacity(0.2)` background, `0.5` opacity text
   - Level 1 (Good): `Color(hex: "8B5CF6").opacity(0.3)` background, `0.7` opacity text
   - Level 2 (Great): `Color(hex: "8B5CF6").opacity(0.5)` background, `0.85` opacity text
   - Level 3 (Excellent): `Color(hex: "8B5CF6").opacity(0.7)` background, `1.0` opacity text
   - Level 4 (Perfect): `Color(hex: "8B5CF6")` solid background, white text
2. Migrate any `09090B` backgrounds to `0A0A0F`
3. Profile card backgrounds: `Color(hex: "0A0A0F")` with `Color(hex: "8B5CF6").opacity(0.1)` border
4. Active/selected profile: violet border at `0.4` opacity + subtle radial glow

**Verification:** Build compiles, quality badges render as violet intensity tiers

### Task 3: ThemeCustomizationView Obsidian Surfaces

**Files:** `opta-native/OptaApp/OptaApp/Views/Settings/ThemeCustomizationView.swift`

**Changes:**
1. Migrate `#09090B` → `0A0A0F` for all base backgrounds
2. Migrate `#1F1F23` → `Color(hex: "0A0A0F")` with white/8% overlay for elevated surfaces
3. Preview panel backgrounds: obsidian with subtle violet/5% tint
4. Keep the rainbow gradient color picker as-is (functional — user picks accent color)
5. Slider tracks: `Color(hex: "8B5CF6").opacity(0.3)` for unfilled, solid violet for filled

**Verification:** Build compiles, theme preview uses obsidian surfaces

### Task 4: KeyboardShortcutsView Minor Alignment

**Files:** `opta-native/OptaApp/OptaApp/Views/Settings/KeyboardShortcutsView.swift`

**Changes:**
1. Find and replace any remaining `09090B` with `0A0A0F`
2. Verify all accents already use `8B5CF6` (expected to be mostly done)
3. Ensure shortcut key capsules use obsidian background with violet border

**Verification:** Build compiles, keyboard shortcuts view uses obsidian base consistently

## Verification

After all tasks:
```bash
cd opta-native && xcodebuild build -project OptaApp/OptaApp.xcodeproj -scheme OptaApp -destination 'platform=macOS' 2>&1 | tail -5
```

Expected: **BUILD SUCCEEDED**

## Success Criteria

- [ ] All Settings views use `0A0A0F` obsidian base (no `09090B` remnants)
- [ ] Quality badges use unified violet intensity tiers (no multi-color)
- [ ] SettingsRowView icons have obsidian + violet styling
- [ ] Theme preview surfaces use obsidian treatment
- [ ] Destructive actions (Reset) keep semantic red color
- [ ] Build succeeds with no new errors

## Output

- SUMMARY.md with files modified, decisions made, deviations
- Per-task atomic commits
