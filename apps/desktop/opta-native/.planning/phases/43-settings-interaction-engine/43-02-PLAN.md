---
phase: 43-settings-interaction-engine
plan: 02
type: execute
wave: 2
depends_on: ["43-01"]
files_modified: [.planning/research/knowledge/settings/conflicts/resolution-upscaling.json, .planning/research/knowledge/settings/conflicts/general-graphics.json]
autonomous: true
---

<objective>
Create cross-setting conflict detection rules for the Settings Interaction Engine.

Purpose: Document mutual exclusions and hard conflicts between game settings. When Setting A is enabled, Setting B cannot be used (or vice versa). This enables Opta to warn users about incompatible setting combinations.

Output:
- `resolution-upscaling.json` - Resolution and upscaling technology conflicts
- `general-graphics.json` - General graphics setting conflicts
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/43-settings-interaction-engine/43-CONTEXT.md
@.planning/research/knowledge/schema/settings-schema.json
@.planning/research/knowledge/settings/README.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create resolution/upscaling conflict data</name>
  <files>.planning/research/knowledge/settings/conflicts/resolution-upscaling.json</files>
  <action>
Create a JSON file following settings-schema.json with resolution and upscaling conflicts.

**Conflict categories to document:**

1. **Upscaling Technology Conflicts:**
   - DLSS vs FSR (can't use both simultaneously)
   - DLSS vs MetalFX (platform exclusive)
   - FSR vs MetalFX (typically one or other)
   - Any upscaler vs native resolution (mutually exclusive)
   - DLSS Frame Generation vs V-Sync (timing conflicts)

2. **Resolution Mode Conflicts:**
   - Native rendering vs upscaled rendering
   - Internal resolution vs display resolution mismatches
   - Integer scaling vs fractional scaling
   - Fullscreen vs borderless windowed (different upscaling paths)

3. **Anti-Aliasing Conflicts:**
   - TAA vs DLSS (DLSS includes temporal AA)
   - TAA vs FSR 2.0+ (FSR 2.0 includes temporal reconstruction)
   - MSAA vs DLSS/FSR (incompatible rendering paths)
   - FXAA + TAA (redundant, wastes resources)

4. **Display Mode Conflicts:**
   - VRR/ProMotion vs fixed refresh rate
   - V-Sync vs G-Sync/FreeSync (different sync methods)

For each conflict entry include:
- `type`: "conflict"
- `direction`: "excludes"
- `settings`: the two conflicting settings
- `reason`: why they conflict
- `resolution`: what happens (error, one disabled, undefined behavior)
- `platforms`: where this conflict applies

Target: 15-20 conflict entries.
  </action>
  <verify>cat .planning/research/knowledge/settings/conflicts/resolution-upscaling.json | python3 -c "import json,sys; d=json.load(sys.stdin); print(f'Valid JSON with {len(d.get(\"interactions\", []))} conflict entries')"</verify>
  <done>resolution-upscaling.json exists with 15+ conflict entries</done>
</task>

<task type="auto">
  <name>Task 2: Create general graphics conflict data</name>
  <files>.planning/research/knowledge/settings/conflicts/general-graphics.json</files>
  <action>
Create a JSON file with general graphics setting conflicts.

**Conflict categories:**

1. **Shadow Conflicts:**
   - Ray-traced shadows vs rasterized shadows (one or other)
   - Contact shadows vs SSAO (overlapping effects)

2. **Reflection Conflicts:**
   - Ray-traced reflections vs SSR (one or other active)
   - Planar reflections vs cubemap reflections (technique choice)

3. **Ambient Occlusion Conflicts:**
   - RTAO vs SSAO vs HBAO+ (choose one)
   - GTAO vs SSAO (technique alternatives)

4. **Motion Blur Conflicts:**
   - Per-object vs camera motion blur
   - Motion blur vs high refresh rate (often disabled at 120Hz+)

5. **Post-Processing Conflicts:**
   - Multiple sharpening filters stacked
   - Film grain + noise reduction
   - Chromatic aberration + lens distortion correction

6. **Quality Preset Conflicts:**
   - Custom settings vs preset (custom overrides preset)
   - Individual setting change breaks preset

For each entry include clear `reason` explaining the technical conflict.

Target: 12-15 conflict entries.
  </action>
  <verify>cat .planning/research/knowledge/settings/conflicts/general-graphics.json | python3 -c "import json,sys; d=json.load(sys.stdin); print(f'Valid JSON with {len(d.get(\"interactions\", []))} conflict entries')"</verify>
  <done>general-graphics.json exists with 12+ conflict entries</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] resolution-upscaling.json is valid JSON
- [ ] Contains 15+ resolution/upscaling conflict entries
- [ ] general-graphics.json is valid JSON
- [ ] Contains 12+ general graphics conflict entries
- [ ] All entries have type="conflict" and direction="excludes"
- [ ] Each entry includes reason and resolution
</verification>

<success_criteria>
- All tasks completed
- Conflict data comprehensive for common gaming scenarios
- Data follows settings-schema.json format
- Ready for Phase 47 Configuration Calculator to query
</success_criteria>

<output>
After completion, create `.planning/phases/43-settings-interaction-engine/43-02-SUMMARY.md`
</output>
