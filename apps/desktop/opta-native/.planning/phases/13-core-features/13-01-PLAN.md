# Plan 13-01: Opta Text Zone Implementation

wave: 1
autonomous: true

## Overview

Create the central glassmorphic text area that dynamically translates what's happening in the app into simple, contextual guidance. This is the "single source of truth" for understanding app state.

## Tasks

### 1. Create OptaTextZone Component
**File**: `src/components/OptaTextZone.tsx` (new)

Central component that displays contextual messages:

```tsx
interface OptaTextZoneProps {
  message: string;
  type: 'neutral' | 'positive' | 'warning' | 'error';
  indicator?: {
    direction: 'up' | 'down';
    value: string;
    label: string;
  };
  hint?: string;
}

export function OptaTextZone({ message, type, indicator, hint }: OptaTextZoneProps) {
  const colorClass = {
    neutral: 'text-foreground',
    positive: 'text-success',
    warning: 'text-warning',
    error: 'text-danger',
  }[type];

  return (
    <motion.div
      className="glass rounded-xl p-4 text-center max-w-md mx-auto"
      initial={{ opacity: 0, y: -10 }}
      animate={{ opacity: 1, y: 0 }}
    >
      <AnimatePresence mode="wait">
        <motion.p
          key={message}
          className={cn("text-lg font-medium", colorClass)}
          initial={{ opacity: 0 }}
          animate={{ opacity: 1 }}
          exit={{ opacity: 0 }}
        >
          {message}
        </motion.p>
      </AnimatePresence>

      {indicator && (
        <motion.div className="flex items-center justify-center gap-2 mt-2">
          {indicator.direction === 'up' ? (
            <TrendingUp className="w-5 h-5 text-success" />
          ) : (
            <TrendingDown className="w-5 h-5 text-danger" />
          )}
          <CountUp end={parseFloat(indicator.value)} className="text-xl font-bold" />
          <span className="text-sm text-muted-foreground">{indicator.label}</span>
        </motion.div>
      )}

      {hint && (
        <p className="text-xs text-muted-foreground/70 mt-2">{hint}</p>
      )}
    </motion.div>
  );
}
```

### 2. Create OptaTextZone Context
**File**: `src/components/OptaTextZoneContext.tsx` (new)

Global context for any component to update the text zone:

```tsx
interface TextZoneState {
  message: string;
  type: 'neutral' | 'positive' | 'warning' | 'error';
  indicator?: { direction: 'up' | 'down'; value: string; label: string };
  hint?: string;
}

const OptaTextZoneContext = createContext<{
  state: TextZoneState;
  setMessage: (msg: string, type?: TextZoneState['type']) => void;
  setIndicator: (indicator: TextZoneState['indicator']) => void;
  showSuccess: (msg: string, indicator?: TextZoneState['indicator']) => void;
  showWarning: (msg: string) => void;
  clear: () => void;
} | null>(null);

export function OptaTextZoneProvider({ children }) {
  const [state, setState] = useState<TextZoneState>({
    message: "Ready to optimize",
    type: 'neutral',
  });

  const setMessage = (message: string, type: TextZoneState['type'] = 'neutral') => {
    setState(prev => ({ ...prev, message, type }));
  };

  // ... other methods

  return (
    <OptaTextZoneContext.Provider value={{ state, setMessage, ... }}>
      {children}
    </OptaTextZoneContext.Provider>
  );
}
```

### 3. Integrate into Layout
**File**: `src/components/Layout.tsx`

Add text zone to the top of the main content area:

```tsx
export function Layout({ children }) {
  return (
    <OptaTextZoneProvider>
      <div className="flex h-screen">
        <Sidebar ... />
        <main className="flex-1 flex flex-col">
          {/* Text Zone at top */}
          <div className="p-4 pb-0">
            <OptaTextZone />
          </div>
          {/* Page content */}
          <div className="flex-1 overflow-auto p-4">
            {children}
          </div>
        </main>
      </div>
    </OptaTextZoneProvider>
  );
}
```

### 4. Connect to Optimization Events
**File**: Various components

Update text zone when significant events occur:

```tsx
// In StealthMode.tsx when optimization completes
const { showSuccess } = useOptaTextZone();
showSuccess("Freed up system resources", {
  direction: 'up',
  value: '512',
  label: 'MB freed',
});

// In Games.tsx when selecting a game
const { setMessage } = useOptaTextZone();
setMessage(`Analyzing ${game.name}...`);

// After analysis
showSuccess("Found 3 optimizations", {
  direction: 'up',
  value: '15',
  label: '% FPS potential',
});
```

### 5. Add Micro-Animations
**File**: `src/components/OptaTextZone.tsx`

Add satisfying animations for state changes:

```tsx
// Animated counter for numbers
const CountUp = ({ end, className }) => {
  const [count, setCount] = useState(0);

  useEffect(() => {
    const duration = 500;
    const steps = 20;
    const increment = end / steps;
    let current = 0;

    const timer = setInterval(() => {
      current += increment;
      if (current >= end) {
        setCount(end);
        clearInterval(timer);
      } else {
        setCount(Math.round(current));
      }
    }, duration / steps);

    return () => clearInterval(timer);
  }, [end]);

  return <span className={className}>{count}</span>;
};
```

## Verification

1. Open app → See "Ready to optimize" in text zone
2. Run Stealth Mode → See "Freed up system resources" with animated counter
3. Select a game → See "Analyzing [game]..." then results
4. Trigger warning → See yellow/warning styled message
5. Clear state → Returns to neutral

## Files Modified

- `src/components/OptaTextZone.tsx` (new)
- `src/components/OptaTextZoneContext.tsx` (new)
- `src/components/Layout.tsx`
- `src/components/StealthMode.tsx`
- `src/pages/Games.tsx`
- `src/App.tsx`

## Estimated Duration

25-30 minutes
