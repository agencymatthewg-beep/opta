---
phase: 21-advanced-visualizations
plan: 04
type: execute
wave: 1
depends_on: []
files_modified: [src/components/effects/DeepGlow.tsx, src/components/effects/PulseRing.tsx, src/components/effects/DataParticles.tsx, src/components/effects/index.ts, src/lib/shaders/deepGlow.glsl]
autonomous: true
---

<objective>
Implement deep glow microinteractions and ambient effects for 2025 design trend differentiation.

Purpose: Add premium visual polish through subtle ambient animations that respond to system state - glowing borders on high load, pulsing rings during optimization, particle effects for data flow.
Output: DeepGlow, PulseRing, and DataParticles effect components that create ambient system awareness.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

**Research findings (from 20-RESEARCH.md):**
- Deep glow + microinteractions = 2025 design differentiation
- tsParticles for accent animations (lightweight)
- Use WebGL shaders for complex glow effects
- Respect prefers-reduced-motion

**Phase 20 WebGL foundation:**
@src/lib/shaders/index.ts
@src/components/effects/NeonBorder.tsx
@src/hooks/useReducedMotion.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install tsParticles</name>
  <files>package.json</files>
  <action>
Install tsParticles for lightweight particle effects:
```bash
npm install @tsparticles/react @tsparticles/slim
```

Use slim bundle (not full) - includes basic shapes and motion, ~40KB gzipped.
Do NOT install @tsparticles/all (500KB+).
  </action>
  <verify>npm ls @tsparticles/react shows installed</verify>
  <done>tsParticles slim bundle installed</done>
</task>

<task type="auto">
  <name>Task 2: Create DeepGlow shader and component</name>
  <files>src/lib/shaders/deepGlow.glsl, src/components/effects/DeepGlow.tsx</files>
  <action>
Create deep glow effect that responds to system metrics:

**GLSL Shader (deepGlow.glsl):**
```glsl
uniform float uIntensity; // 0.0 - 1.0 based on CPU/memory load
uniform float uTime;
uniform vec3 uColor; // Semantic color from design system
uniform vec2 uResolution;

// Multi-layer glow:
// Layer 1: Soft outer corona (exponential falloff)
// Layer 2: Brighter inner core
// Layer 3: Subtle animated shimmer
```

**React Component (DeepGlow.tsx):**
```typescript
interface DeepGlowProps {
  intensity?: number; // 0-1, auto-calculated from telemetry if not provided
  color?: 'primary' | 'success' | 'warning' | 'danger'; // Auto from intensity if not provided
  children: React.ReactNode;
  className?: string;
}
```

Behavior:
- intensity < 0.3: Subtle purple glow (idle)
- intensity 0.3-0.6: Brighter cyan glow (active)
- intensity 0.6-0.85: Yellow/orange glow (warning)
- intensity > 0.85: Pulsing red glow (critical)

If intensity not provided, auto-calculate from useTelemetry CPU average.
Use existing WebGL infrastructure from Phase 20.
Respect useReducedMotion - disable animation, show static glow.
  </action>
  <verify>npm run build succeeds, DeepGlow wraps content with reactive glow</verify>
  <done>DeepGlow component renders multi-layer glow that responds to system load</done>
</task>

<task type="auto">
  <name>Task 3: Create PulseRing component</name>
  <files>src/components/effects/PulseRing.tsx, src/components/effects/index.ts</files>
  <action>
Create animated pulse ring effect for optimization feedback:

```typescript
interface PulseRingProps {
  active?: boolean; // Show pulse animation
  color?: string; // CSS color or design system token
  size?: number; // Diameter in px
  pulseCount?: number; // Number of concentric rings (default 3)
  duration?: number; // Animation duration in ms (default 2000)
  className?: string;
}
```

Implementation:
- Use SVG circles with animated stroke-dashoffset
- Rings expand outward from center and fade
- Stagger ring animations for wave effect
- Configurable ring count and timing
- Use Framer Motion for animation (respects reduced motion)
- Semi-transparent rings with blur for "energy" feel

Use cases:
- Around Stealth Mode button during optimization
- Score card when score improves
- Process termination feedback
  </action>
  <verify>PulseRing renders expanding concentric circles when active=true</verify>
  <done>PulseRing component creates expanding wave animation for action feedback</done>
</task>

<task type="auto">
  <name>Task 4: Create DataParticles component</name>
  <files>src/components/effects/DataParticles.tsx</files>
  <action>
Create particle effect for data flow visualization:

```typescript
interface DataParticlesProps {
  direction?: 'up' | 'down' | 'radial'; // Flow direction
  intensity?: number; // 0-1, affects particle count and speed
  color?: string; // Design system color
  className?: string;
}
```

Implementation with tsParticles:
- Particles represent data flow (uploads = up, downloads = down)
- Particle count scales with intensity (5-50 particles)
- Subtle, non-distracting background effect
- Particles are small dots (2-4px) with slight glow
- Use pointer-events: none so they don't block interaction
- Initialize tsParticles engine once globally

Presets:
- "upload": Green particles flowing up
- "download": Blue particles flowing down
- "processing": Purple particles moving radially
- "idle": Very slow, sparse movement

Respect reduced motion - show static dots instead of animation.
  </action>
  <verify>DataParticles renders flowing particles with tsParticles</verify>
  <done>DataParticles component creates ambient data flow visualization</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] DeepGlow shows reactive glow based on system load
- [ ] PulseRing animates expanding rings when active
- [ ] DataParticles shows flowing particle effect
- [ ] All effects respect prefers-reduced-motion
- [ ] Performance acceptable (60fps maintained)
- [ ] Effects are subtle and non-distracting
- [ ] Colors match design system
</verification>

<success_criteria>
- All tasks completed
- Three ambient effect components functional
- Effects respond to system state appropriately
- Reduced motion preference respected
- Performance maintained (no frame drops)
</success_criteria>

<output>
After completion, create `.planning/phases/21-advanced-visualizations/21-04-SUMMARY.md`
</output>
