---
phase: 06-polish
plan: 01
subsystem: ui-performance
requires: [preferences, app-controls, menu-ui]
provides: [design-system, performance-optimization, final-polish]
affects: []
tags: [design-system, performance, animations, accessibility]
---

# Plan 06-01: Polish & Performance

## Goal

Apply Opta design system colors, optimize performance, add subtle animations, and ensure accessibility compliance for a polished 1.0 release.

## Tasks

### Task 1: Apply Opta design system colors

**Files:** `OptaMini/Utilities/DesignSystem.swift` (create), multiple views (modify)

Create a centralized design system with Opta brand colors.

```swift
// DesignSystem.swift
import SwiftUI

enum OptaColors {
    static let accent = Color(red: 0.2, green: 0.6, blue: 1.0)  // Opta blue
    static let success = Color(red: 0.2, green: 0.8, blue: 0.4) // Running green
    static let warning = Color(red: 1.0, green: 0.6, blue: 0.2) // Warning orange
    static let danger = Color(red: 0.9, green: 0.3, blue: 0.3)  // Stop red
    static let surface = Color(NSColor.windowBackgroundColor)
    static let textPrimary = Color.primary
    static let textSecondary = Color.secondary
}

enum OptaFonts {
    static let title = Font.system(size: 14, weight: .semibold)
    static let body = Font.system(size: 13)
    static let caption = Font.system(size: 11)
    static let small = Font.system(size: 10)
}
```

Update views to use `OptaColors` and `OptaFonts` consistently.

**Verify:** Visual consistency across all views

### Task 2: Add subtle animations

**Files:** `OptaMini/ContentView.swift` (modify)

Add smooth animations for state changes.

```swift
// Status indicator pulse animation for running apps
Circle()
    .fill(isRunning ? OptaColors.success : Color.gray.opacity(0.3))
    .frame(width: 8, height: 8)
    .animation(.easeInOut(duration: 0.3), value: isRunning)

// Hover state transitions
.animation(.easeOut(duration: 0.15), value: isHovered)

// Button press feedback
.scaleEffect(isPressed ? 0.95 : 1.0)
.animation(.easeOut(duration: 0.1), value: isPressed)
```

**Verify:** Smooth transitions, no jarring state changes

### Task 3: Add keyboard shortcuts

**Files:** `OptaMini/ContentView.swift` (modify), `OptaMini/AppDelegate.swift` (modify)

Add keyboard navigation and shortcuts.

```swift
// In ContentView - keyboard shortcuts
.keyboardShortcut("q", modifiers: [.command, .shift])  // Quit All
.keyboardShortcut("w", modifiers: .command)  // Close popover

// Focus management for app list
.focusable()
.onKeyPress(.return) { onLaunch(); return .handled }
```

**Verify:** Cmd+Shift+Q quits all, keyboard navigation works

### Task 4: Add accessibility labels

**Files:** Multiple views (modify)

Ensure VoiceOver compatibility.

```swift
// App row accessibility
.accessibilityElement(children: .combine)
.accessibilityLabel("\(app.name), \(isRunning ? "running" : "stopped")")
.accessibilityHint(isRunning ? "Double tap to stop" : "Double tap to launch")

// Status indicator
.accessibilityLabel("\(runningCount) of \(OptaApp.allApps.count) apps running")

// Buttons
.accessibilityLabel("Quit All Opta Apps")
```

**Verify:** VoiceOver reads all elements correctly

### Task 5: Performance verification

**Files:** None (verification only)

Verify app meets performance targets:
- CPU usage < 1% when idle
- Memory < 50MB
- Launch time < 0.5s

```bash
# Check CPU usage
top -pid $(pgrep OptaMini) -l 1

# Check memory
ps -o rss= -p $(pgrep OptaMini)
```

Document findings in summary.

**Verify:** All performance targets met

## Acceptance Criteria

- [ ] Opta design system colors applied consistently
- [ ] Smooth animations on state changes
- [ ] Keyboard shortcuts functional (Cmd+Shift+Q, etc.)
- [ ] VoiceOver reads all elements correctly
- [ ] CPU < 1% idle, Memory < 50MB
- [ ] No visual glitches or jarring transitions

## Estimated Complexity

Low-Medium â€” Design system straightforward, animations require care to avoid jank.
