---
phase: 16-premium-polish-pass
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [Opta Scan/PrivacyInfo.xcprivacy, Opta Scan/Design/OptaTypography.swift, .planning/COMPLIANCE.md]
autonomous: true
---

<objective>
Create Privacy Manifest for App Store compliance, fix Dynamic Type support for accessibility, and document all compliance requirements.

Purpose: Ensure app meets App Store submission requirements and iOS accessibility standards.
Output: PrivacyInfo.xcprivacy, fixed typography with Dynamic Type, COMPLIANCE.md documentation.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/IOS_AESTHETIC_GUIDE.md

@Opta Scan/Design/OptaTypography.swift
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Privacy Manifest</name>
  <files>Opta Scan/PrivacyInfo.xcprivacy</files>
  <action>
Create PrivacyInfo.xcprivacy with Required Reason API declarations:

1. Privacy Nutrition Labels:
   - NSPrivacyTracking: false (no tracking)
   - NSPrivacyTrackingDomains: [] (no tracking domains)

2. Required Reason APIs used by this app:
   - UserDefaults (NSPrivacyAccessedAPICategoryUserDefaults)
     - Reason: CA92.1 (App-specific data storage)
   - System boot time (NSPrivacyAccessedAPICategorySystemBootTime)
     - Only if ProcessInfo.systemUptime used - check first
   - File timestamp (NSPrivacyAccessedAPICategoryFileTimestamp)
     - Only if file modification dates accessed - check first

3. Privacy Accessed API Types to verify:
   - Core Data uses file system (covered by standard frameworks)
   - Camera access (already in Info.plist)
   - Photo library (already in Info.plist)

Format as proper XML plist. Add to Xcode project after creation.
  </action>
  <verify>File exists and is valid plist: plutil -lint "Opta Scan/PrivacyInfo.xcprivacy"</verify>
  <done>PrivacyInfo.xcprivacy created with accurate Required Reason API declarations</done>
</task>

<task type="auto">
  <name>Task 2: Fix Dynamic Type Support</name>
  <files>Opta Scan/Design/OptaTypography.swift</files>
  <action>
Update OptaTypography.swift to use Dynamic Type text styles instead of fixed sizes:

Current (WRONG - fixed sizes):
```swift
static let optaDisplay = Font.system(size: 34, weight: .bold, design: .rounded)
```

Should be (CORRECT - Dynamic Type):
```swift
static let optaDisplay = Font.largeTitle.weight(.bold)
```

Mapping:
- optaDisplay: .largeTitle.weight(.bold) (with .rounded design)
- optaTitle: .title2.weight(.semibold)
- optaHeadline: .headline
- optaBody: .body
- optaCaption: .caption.weight(.medium)
- optaLabel: .caption2.weight(.medium)

Use relativeTo parameter to maintain visual hierarchy while supporting Dynamic Type:
```swift
Font.system(.largeTitle, design: .rounded).weight(.bold)
```

This ensures:
- Text scales with user's accessibility settings
- Maintains design intent through relative sizing
- Passes App Store accessibility review
  </action>
  <verify>Build succeeds; inspect typography visually at different Dynamic Type sizes in Settings > Accessibility > Display & Text Size</verify>
  <done>All typography uses Dynamic Type text styles; text scales properly with accessibility settings</done>
</task>

<task type="auto">
  <name>Task 3: Create Compliance Documentation</name>
  <files>.planning/COMPLIANCE.md</files>
  <action>
Create .planning/COMPLIANCE.md documenting all App Store compliance requirements:

1. **Privacy Manifest** - PrivacyInfo.xcprivacy location and contents
2. **Required Reason APIs** - Which APIs used and why
3. **Accessibility Compliance**:
   - Dynamic Type: All text scales
   - Reduce Motion: Animations respect setting (list files)
   - VoiceOver: All interactive elements have labels (list count)
4. **App Store Guidelines**:
   - 4.2.2 - Minimum functionality (camera, AI, history)
   - 5.1.1 - Data collection disclosed
   - 2.5.1 - Uses public APIs only
5. **Pre-Submission Checklist**:
   - [ ] Privacy Manifest included
   - [ ] Camera usage description
   - [ ] Photo library usage description
   - [ ] All animations respect reduce motion
   - [ ] VoiceOver labels on all controls
   - [ ] Dynamic Type support verified
   - [ ] Build succeeds with no warnings
  </action>
  <verify>cat .planning/COMPLIANCE.md shows all sections</verify>
  <done>COMPLIANCE.md documents all App Store requirements with verification status</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] plutil -lint "Opta Scan/PrivacyInfo.xcprivacy" passes
- [ ] xcodebuild build succeeds
- [ ] OptaTypography uses Font.system(.textStyle) not Font.system(size:)
- [ ] COMPLIANCE.md exists with all sections
</verification>

<success_criteria>

- Privacy Manifest created and valid
- Dynamic Type support fixed in typography
- Compliance documentation complete
- Build succeeds
</success_criteria>

<output>
After completion, create `.planning/phases/16-premium-polish-pass/16-01-SUMMARY.md`
</output>
