---
phase: 17-chess-integration
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [package.json, src/types/chess.ts]
autonomous: true
---

<objective>
Set up chess foundation with dependencies and TypeScript types.

Purpose: Establish the chess ecosystem libraries and type definitions that all subsequent plans depend on.
Output: Installed chess.js, react-chessboard, stockfish packages; comprehensive TypeScript interfaces for chess feature.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/17-chess-integration/17-RESEARCH.md

@package.json
@src/types/telemetry.ts
@src/types/game.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install chess dependencies</name>
  <files>package.json</files>
  <action>
Install the standard chess stack identified in 17-RESEARCH.md:

```bash
npm install chess.js react-chessboard stockfish
```

Verify versions match research:
- chess.js: 1.4.0+
- react-chessboard: 5.8.6+
- stockfish: 17.1.0+

These libraries provide:
- chess.js: Game logic, move validation, FEN/PGN parsing (TypeScript native)
- react-chessboard: React board component with drag-and-drop
- stockfish: AI opponent via WebAssembly

Do NOT install any additional chess libraries - the standard stack is complete.
  </action>
  <verify>npm ls chess.js react-chessboard stockfish shows all packages installed</verify>
  <done>All three chess packages installed with compatible versions</done>
</task>

<task type="auto">
  <name>Task 2: Create chess TypeScript types</name>
  <files>src/types/chess.ts</files>
  <action>
Create comprehensive TypeScript interfaces for the chess feature. Follow existing type patterns from telemetry.ts and game.ts.

Include:

1. **ChessMode type** - 'casual' | 'puzzle' | 'analysis' (from 17-RESEARCH.md three-mode architecture)

2. **ChessGameState interface:**
   - fen: string (current position in FEN notation)
   - history: ChessMove[] (move history with verbose info)
   - isGameOver: boolean
   - result: 'checkmate' | 'stalemate' | 'draw' | 'resignation' | null
   - playerColor: 'white' | 'black'
   - turn: 'w' | 'b'

3. **ChessMove interface** (matches chess.js Move type):
   - from: string (e.g., 'e2')
   - to: string (e.g., 'e4')
   - san: string (Standard Algebraic Notation e.g., 'e4')
   - piece: 'p' | 'n' | 'b' | 'r' | 'q' | 'k'
   - color: 'w' | 'b'
   - captured?: string (piece type if capture)
   - promotion?: string (piece type if pawn promotion)

4. **AIDifficulty type** - Friendly difficulty names:
   - 'beginner' | 'casual' | 'intermediate' | 'advanced' | 'maximum'

5. **AIConfig interface:**
   - difficulty: AIDifficulty
   - skillLevel: number (0-20 Stockfish mapping)
   - thinkTimeMs: number (AI think time in milliseconds)

6. **ChessSettings interface:**
   - mode: ChessMode
   - aiConfig: AIConfig
   - showHints: boolean
   - showMoveHistory: boolean
   - boardOrientation: 'white' | 'black'
   - autoSave: boolean

7. **Helper constant:** DIFFICULTY_TO_SKILL_LEVEL mapping:
   - beginner: 2
   - casual: 6
   - intermediate: 11
   - advanced: 15
   - maximum: 20

Export all types and constants.
  </action>
  <verify>tsc --noEmit passes with no type errors in chess.ts</verify>
  <done>Complete TypeScript type definitions for chess feature exported from src/types/chess.ts</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm ls chess.js react-chessboard stockfish` shows all packages
- [ ] `npm run build` succeeds without errors
- [ ] All chess types exported from src/types/chess.ts
- [ ] Types follow existing project patterns (see telemetry.ts, game.ts)
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- Chess dependencies available for subsequent plans
- Types ready for useChessGame and useStockfish hooks
</success_criteria>

<output>
After completion, create `.planning/phases/17-chess-integration/17-01-SUMMARY.md`
</output>
