---
phase: 42-hardware-synergy-database
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [.planning/research/knowledge/schema/synergy-schema.json, .planning/research/knowledge/synergies/README.md]
autonomous: true
---

<objective>
Design and create the component interaction matrix schema for the Hardware Synergy Database.

Purpose: Extend the knowledge architecture with schemas that capture how hardware components interact, affect each other, and create bottlenecks or synergies. This schema will be the foundation for all synergy calculations.

Output:
- `synergy-schema.json` - JSON schema for hardware interaction entries
- `synergies/` directory structure with README
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/research/knowledge/schema/knowledge-schema.json
@.planning/phases/41.1-knowledge-architecture/PLAN.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create synergy-schema.json</name>
  <files>.planning/research/knowledge/schema/synergy-schema.json</files>
  <action>
Create a JSON schema that defines hardware synergy entries with these key structures:

1. **Interaction Entry** schema fields:
   - `id`: kebab-case unique identifier
   - `type`: enum ["bottleneck", "synergy", "neutral", "dependency"]
   - `components`: array of component references (e.g., "cpu:m4-pro", "gpu:m4-pro-gpu")
   - `relationship`: description of how components interact
   - `formula`: optional mathematical formula for calculating impact
   - `conditions`: array of conditions when this interaction applies
   - `impact`: object with `performance`, `thermal`, `power` fields (each -100 to +100 scale)
   - `confidence`: "high", "medium", "low"
   - `tags`: array of strings
   - `applicableTo`: array of chip/device names

2. **Condition** object:
   - `parameter`: what's being checked (e.g., "memory_usage", "gpu_utilization")
   - `operator`: "gt", "lt", "eq", "gte", "lte", "range"
   - `value`: numeric or range object
   - `unit`: optional unit string

3. **Impact Formula** object:
   - `expression`: mathematical expression string
   - `variables`: object mapping variable names to descriptions
   - `outputUnit`: what the formula produces

Follow the existing knowledge-schema.json patterns:
- Use JSON Schema draft 2020-12
- Include $defs for reusable components
- Add proper descriptions to all fields
- Support numericValue objects for quantifiable impacts
  </action>
  <verify>cat .planning/research/knowledge/schema/synergy-schema.json | python3 -c "import json,sys; json.load(sys.stdin); print('Valid JSON')"</verify>
  <done>synergy-schema.json exists with complete schema for interactions, conditions, and formulas</done>
</task>

<task type="auto">
  <name>Task 2: Create synergies directory structure</name>
  <files>.planning/research/knowledge/synergies/README.md, .planning/research/knowledge/synergies/bottlenecks/, .planning/research/knowledge/synergies/thermal/, .planning/research/knowledge/synergies/power/</files>
  <action>
Create the synergies directory structure:

```
.planning/research/knowledge/synergies/
├── README.md           # Documentation for synergy files
├── bottlenecks/        # GPU-CPU, memory bottleneck data
├── thermal/            # Thermal profiles and interactions
└── power/              # Power budget and efficiency data
```

README.md should document:
1. Purpose of the synergy database
2. Schema reference (synergy-schema.json)
3. File naming conventions (e.g., `gpu-cpu-bottlenecks.json`, `m-series-thermal.json`)
4. How to add new entries
5. Confidence levels explained
6. Example entry

Create empty .gitkeep files in subdirectories to ensure they're tracked.
  </action>
  <verify>ls -la .planning/research/knowledge/synergies/ && cat .planning/research/knowledge/synergies/README.md | head -30</verify>
  <done>synergies/ directory exists with README.md and bottlenecks/, thermal/, power/ subdirectories</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] synergy-schema.json is valid JSON
- [ ] Schema includes interaction, condition, and formula definitions
- [ ] synergies/ directory structure created
- [ ] README.md documents the schema and usage
</verification>

<success_criteria>
- All tasks completed
- Schema follows existing knowledge-schema.json patterns
- Directory structure ready for data population
- Documentation clear enough for Claude to populate data in subsequent plans
</success_criteria>

<output>
After completion, create `.planning/phases/42-hardware-synergy-database/42-01-SUMMARY.md`
</output>
