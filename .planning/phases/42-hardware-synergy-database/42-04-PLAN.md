---
phase: 42-hardware-synergy-database
plan: 04
type: execute
wave: 2
depends_on: ["42-01"]
files_modified: [.planning/research/knowledge/synergies/thermal/m-series-thermal.json]
autonomous: true
---

<objective>
Create thermal profile database for Apple Silicon hardware generations.

Purpose: Document thermal behavior, throttling thresholds, and cooling characteristics across different M-series chips and Mac form factors. This enables Opta to predict thermal limits and suggest optimizations.

Output:
- `m-series-thermal.json` - Thermal profiles and interactions for M-series chips
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/research/knowledge/schema/synergy-schema.json
@.planning/research/knowledge/synergies/README.md
@.planning/research/knowledge/t2-architecture/apple-silicon.json
@.planning/research/knowledge/t3-specs/m-series.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create thermal profile data</name>
  <files>.planning/research/knowledge/synergies/thermal/m-series-thermal.json</files>
  <action>
Create a JSON file following synergy-schema.json with thermal interaction data.

Include entries for:

1. **Throttling Thresholds by Chip**:
   - M1/M2/M3/M4 base: ~100°C Tj max, throttle starts ~95°C
   - Pro/Max variants: Similar Tj, more thermal headroom
   - Document fan curve behavior vs fanless (MacBook Air)

2. **Form Factor Thermal Profiles**:
   - MacBook Air (fanless): Aggressive throttling under sustained load
   - MacBook Pro 14": Active cooling, sustained performance
   - MacBook Pro 16": Best sustained performance, larger thermal mass
   - Mac Mini: Compact but active cooling
   - Mac Studio: Desktop-class cooling, rarely throttles
   - Mac Pro: Maximum cooling, sustained max performance

3. **Thermal-Performance Interactions**:
   - CPU throttling impact on gaming
   - GPU throttling patterns
   - Ambient temperature effects
   - Workload duration vs thermal state

4. **Thermal Synergies**:
   - P-core to E-core migration under thermal pressure
   - GPU clock reduction patterns
   - Fan speed vs acoustic levels
   - External cooling effectiveness (stands, pads)

For each entry include:
- Temperature thresholds (idle, load, throttle, max)
- Performance impact percentages
- Form factor applicability
- Confidence level

Reference the existing knowledge from t2-architecture and t3-specs.

Target: 20-25 thermal-related entries covering all major scenarios.
  </action>
  <verify>cat .planning/research/knowledge/synergies/thermal/m-series-thermal.json | python3 -c "import json,sys; d=json.load(sys.stdin); print(f'Valid JSON with {len(d.get(\"entries\", []))} entries')"</verify>
  <done>m-series-thermal.json exists with 20+ thermal profile entries</done>
</task>

<task type="auto">
  <name>Task 2: Add thermal management heuristics</name>
  <files>.planning/research/knowledge/synergies/thermal/m-series-thermal.json</files>
  <action>
Add a `heuristics` section with thermal optimization guidance:

```json
"heuristics": [
  {
    "id": "thermal-throttling-detection",
    "name": "Thermal Throttling Detection",
    "description": "How to detect when thermal limits are affecting performance",
    "indicators": [
      "CPU/GPU temperature > 95°C sustained",
      "Clock speeds dropping from base frequency",
      "Performance degradation after 10-15 minutes of load",
      "Fan noise at maximum (on models with fans)"
    ],
    "remediation": [
      "Improve ambient airflow",
      "Use laptop stand to elevate device",
      "Check for dust in vents (MacBook Pro, Mac Studio)",
      "Reduce workload (lower settings, close apps)",
      "Consider Low Power Mode for less aggressive clocks"
    ]
  },
  ...
]
```

Include heuristics for:
- Thermal throttling detection
- Fanless Mac optimization (Air)
- Long gaming session management
- Ambient temperature recommendations
- External cooling effectiveness

Add a `formFactorProfiles` section:
```json
"formFactorProfiles": {
  "macbook-air": {
    "cooling": "passive",
    "sustainedLoad": "10-15 minutes before throttle",
    "bestFor": "Light gaming, productivity",
    "thermalAdvice": "Take breaks during intensive tasks, ensure airflow under device"
  },
  "macbook-pro-14": {
    "cooling": "active",
    "sustainedLoad": "Sustained with minor throttle",
    "bestFor": "Gaming, video editing",
    "thermalAdvice": "Keep vents clear, elevate if possible"
  },
  ...
}
```
  </action>
  <verify>cat .planning/research/knowledge/synergies/thermal/m-series-thermal.json | python3 -c "import json,sys; d=json.load(sys.stdin); print(f'Has heuristics: {\"heuristics\" in d}, Has formFactorProfiles: {\"formFactorProfiles\" in d}')"</verify>
  <done>m-series-thermal.json includes heuristics and formFactorProfiles sections</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] m-series-thermal.json is valid JSON
- [ ] Contains 20+ thermal entries
- [ ] Covers all M-series generations (M1, M2, M3, M4)
- [ ] Covers all form factors (Air, Pro, Mini, Studio, Pro)
- [ ] Includes heuristics and form factor profiles
</verification>

<success_criteria>
- All tasks completed
- Thermal profiles comprehensive for all Apple Silicon Macs
- Throttling thresholds documented
- Practical heuristics for thermal management
</success_criteria>

<output>
After completion, create `.planning/phases/42-hardware-synergy-database/42-04-SUMMARY.md`
</output>
