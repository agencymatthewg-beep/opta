---
phase: 42-hardware-synergy-database
plan: 05
type: execute
wave: 2
depends_on: ["42-01"]
files_modified: [.planning/research/knowledge/synergies/power/power-budget.json]
autonomous: true
---

<objective>
Create power budget optimization tables for the Hardware Synergy Database.

Purpose: Document power consumption patterns, efficiency curves, and power management strategies across different Apple Silicon configurations and power modes. This enables Opta to optimize for battery life vs performance.

Output:
- `power-budget.json` - Power consumption and efficiency data for M-series chips
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/research/knowledge/schema/synergy-schema.json
@.planning/research/knowledge/synergies/README.md
@.planning/research/knowledge/t2-architecture/apple-silicon.json
@.planning/research/knowledge/t3-specs/m-series.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create power budget data</name>
  <files>.planning/research/knowledge/synergies/power/power-budget.json</files>
  <action>
Create a JSON file following synergy-schema.json with power consumption data.

Include entries for:

1. **TDP by Chip Variant**:
   - M1/M2/M3/M4 base: ~15-20W
   - Pro variants: ~30-40W
   - Max variants: ~60-90W
   - Ultra variants: ~120-180W

2. **Power Mode Impacts**:
   - Low Power Mode: Clock reduction, P-core usage reduction
   - Automatic Mode: Dynamic scaling
   - High Power Mode: Maximum clocks (MacBook Pro on power)
   - Battery vs plugged-in behavior differences

3. **Efficiency Curves**:
   - Performance-per-watt at different utilization levels
   - E-core vs P-core efficiency
   - GPU power scaling with workload
   - Idle power consumption (critical for battery)

4. **Gaming Power Profiles**:
   - Typical gaming power draw by game intensity
   - Battery life estimates for gaming
   - Optimal settings for battery gaming
   - Charging while gaming thermal impact

5. **Power-Performance Synergies**:
   - Sweet spots for performance vs power
   - When High Power Mode actually helps
   - Frame rate cap for power efficiency
   - Background task impact on gaming power

For each entry include:
- Power values in watts
- Performance impact percentages
- Battery life impact estimates
- Applicable chips and form factors

Target: 20-25 power-related entries.
  </action>
  <verify>cat .planning/research/knowledge/synergies/power/power-budget.json | python3 -c "import json,sys; d=json.load(sys.stdin); print(f'Valid JSON with {len(d.get(\"entries\", []))} entries')"</verify>
  <done>power-budget.json exists with 20+ power-related entries</done>
</task>

<task type="auto">
  <name>Task 2: Add power optimization heuristics</name>
  <files>.planning/research/knowledge/synergies/power/power-budget.json</files>
  <action>
Add a `heuristics` section with power optimization guidance:

```json
"heuristics": [
  {
    "id": "battery-gaming-optimization",
    "name": "Battery Gaming Optimization",
    "description": "How to maximize gaming time on battery",
    "indicators": [
      "Gaming on battery (unplugged)",
      "Battery level dropping rapidly",
      "Device running hot"
    ],
    "remediation": [
      "Enable Low Power Mode in System Settings",
      "Cap frame rate to 30-60 FPS",
      "Lower resolution to 1080p or below",
      "Reduce graphics settings (shadows, AA, reflections)",
      "Close background apps (browsers, Electron apps)",
      "Lower screen brightness"
    ]
  },
  ...
]
```

Include heuristics for:
- Battery gaming optimization
- Maximum performance mode usage
- Power-efficient long sessions
- Charging while gaming
- Background power drain reduction

Add a `powerModes` section documenting macOS power modes:
```json
"powerModes": {
  "low-power": {
    "available": ["MacBook Air", "MacBook Pro"],
    "effect": "Reduces CPU/GPU clocks ~20-30%, limits P-core usage",
    "batteryBenefit": "+30-50% battery life",
    "performanceCost": "-15-30% depending on workload",
    "bestFor": "Light tasks, extending battery"
  },
  "automatic": {
    "available": ["All Macs"],
    "effect": "Dynamic scaling based on workload and power source",
    "batteryBenefit": "Balanced",
    "performanceCost": "None when plugged in",
    "bestFor": "Default for most users"
  },
  ...
}
```

Add a `batteryEstimates` section:
```json
"batteryEstimates": {
  "light-gaming-30fps": {
    "macbook-air-m3": "3-4 hours",
    "macbook-pro-14-m3-pro": "4-5 hours"
  },
  "medium-gaming-60fps": {
    "macbook-air-m3": "1.5-2 hours",
    "macbook-pro-14-m3-pro": "2.5-3 hours"
  },
  ...
}
```
  </action>
  <verify>cat .planning/research/knowledge/synergies/power/power-budget.json | python3 -c "import json,sys; d=json.load(sys.stdin); print(f'Has heuristics: {\"heuristics\" in d}, Has powerModes: {\"powerModes\" in d}, Has batteryEstimates: {\"batteryEstimates\" in d}')"</verify>
  <done>power-budget.json includes heuristics, powerModes, and batteryEstimates sections</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] power-budget.json is valid JSON
- [ ] Contains 20+ power-related entries
- [ ] Covers TDP, power modes, efficiency curves
- [ ] Includes heuristics for power optimization
- [ ] Battery estimates included for gaming scenarios
</verification>

<success_criteria>
- All tasks completed
- Power data comprehensive for all M-series variants
- Power modes documented with trade-offs
- Practical battery gaming guidance included
</success_criteria>

<output>
After completion, create `.planning/phases/42-hardware-synergy-database/42-05-SUMMARY.md`
</output>
