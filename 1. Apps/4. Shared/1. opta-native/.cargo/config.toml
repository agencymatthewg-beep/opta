# Cross-compilation configuration for Opta Native
# Targets: macOS, iOS, Android (future)

[build]
# Default to native macOS (Apple Silicon)
target = "aarch64-apple-darwin"

[target.aarch64-apple-darwin]
rustflags = ["-C", "link-arg=-mmacosx-version-min=13.0"]

[target.x86_64-apple-darwin]
rustflags = ["-C", "link-arg=-mmacosx-version-min=13.0"]

[target.aarch64-apple-ios]
rustflags = ["-C", "link-arg=-mios-version-min=17.0"]

[target.aarch64-apple-ios-sim]
rustflags = ["-C", "link-arg=-mios-simulator-version-min=17.0"]

[target.x86_64-apple-ios]
rustflags = ["-C", "link-arg=-mios-simulator-version-min=17.0"]

# Android targets (future use - Phase 67+)
[target.aarch64-linux-android]
linker = "aarch64-linux-android24-clang"

[target.armv7-linux-androideabi]
linker = "armv7a-linux-androideabi24-clang"

[target.x86_64-linux-android]
linker = "x86_64-linux-android24-clang"

[alias]
# Convenience aliases for common builds
build-ios = "build --target aarch64-apple-ios --release"
build-ios-sim = "build --target aarch64-apple-ios-sim --release"
build-macos = "build --target aarch64-apple-darwin --release"
build-macos-intel = "build --target x86_64-apple-darwin --release"
