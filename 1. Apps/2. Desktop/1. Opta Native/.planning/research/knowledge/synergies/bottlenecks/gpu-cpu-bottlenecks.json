{
  "$schema": "synergy-schema.json",
  "domain": "gpu-cpu",
  "subDomain": "bottleneck-calculations",
  "lastUpdated": "2026-01-18",
  "lastVerified": "2026-01-18",
  "confidence": "medium",
  "sources": [
    {
      "name": "Gemini Deep Research - Apple Silicon GPU Architecture",
      "type": "gemini-research",
      "date": "2026-01-18"
    },
    {
      "name": "Gemini Deep Research - Apple Silicon CPU Architecture",
      "type": "gemini-research",
      "date": "2026-01-18"
    },
    {
      "name": "Apple Developer Documentation - Metal Best Practices",
      "type": "official-docs",
      "url": "https://developer.apple.com/documentation/metal/metal_best_practices_guide",
      "date": "2024"
    }
  ],
  "interactions": [
    {
      "id": "cpu-bound-draw-call-overhead",
      "type": "bottleneck",
      "components": ["cpu:apple-silicon", "gpu:apple-silicon-gpu"],
      "relationship": "Excessive draw calls overwhelm CPU command encoding, leaving GPU idle waiting for work",
      "conditions": [
        {
          "parameter": "cpu_utilization",
          "operator": "gt",
          "value": 85,
          "unit": "percent"
        },
        {
          "parameter": "gpu_utilization",
          "operator": "lt",
          "value": 60,
          "unit": "percent"
        },
        {
          "parameter": "draw_calls_per_frame",
          "operator": "gt",
          "value": 5000,
          "unit": "count"
        }
      ],
      "formula": {
        "expression": "(100 - gpu_utilization) * 0.8",
        "variables": {
          "gpu_utilization": "Current GPU utilization percentage"
        },
        "outputUnit": "fps_loss_percent"
      },
      "impact": {
        "performance": { "value": -35, "min": -20, "max": -50 },
        "thermal": { "value": 10 },
        "power": { "value": 15 }
      },
      "confidence": "high",
      "applicableTo": ["M1", "M1 Pro", "M1 Max", "M2", "M2 Pro", "M2 Max", "M3", "M3 Pro", "M3 Max", "M4", "M4 Pro", "M4 Max"],
      "tags": ["cpu-bound", "draw-calls", "command-encoding", "metal"],
      "source": "Metal Best Practices Guide",
      "sourceDate": "2024",
      "mitigations": [
        "Enable draw call batching/instancing in game settings",
        "Reduce object complexity and scene density",
        "Use indirect draw commands where supported",
        "Close CPU-intensive background applications"
      ]
    },
    {
      "id": "cpu-bound-physics-simulation",
      "type": "bottleneck",
      "components": ["cpu:apple-silicon", "gpu:apple-silicon-gpu"],
      "relationship": "Complex physics simulations consume CPU cycles, delaying frame submission to GPU",
      "conditions": [
        {
          "parameter": "cpu_utilization",
          "operator": "gt",
          "value": 90,
          "unit": "percent"
        },
        {
          "parameter": "gpu_utilization",
          "operator": "lt",
          "value": 50,
          "unit": "percent"
        },
        {
          "parameter": "physics_object_count",
          "operator": "gt",
          "value": 200,
          "unit": "count"
        }
      ],
      "formula": {
        "expression": "base_penalty * (physics_objects / 100)",
        "variables": {
          "base_penalty": "Base physics overhead factor (-15)",
          "physics_objects": "Number of active physics objects"
        },
        "outputUnit": "frame_time_increase_ms"
      },
      "impact": {
        "performance": { "value": -30, "min": -15, "max": -45 },
        "thermal": { "value": 15 },
        "power": { "value": 20 }
      },
      "confidence": "medium",
      "applicableTo": ["M1", "M1 Pro", "M1 Max", "M2", "M2 Pro", "M2 Max", "M3", "M3 Pro", "M3 Max", "M4", "M4 Pro", "M4 Max"],
      "tags": ["cpu-bound", "physics", "simulation", "frame-time"],
      "source": "Gemini Deep Research",
      "sourceDate": "2026",
      "mitigations": [
        "Reduce physics quality in game settings",
        "Lower ragdoll count and complexity",
        "Disable destructible environments if available",
        "Enable physics threading if game supports it"
      ]
    },
    {
      "id": "cpu-bound-ai-game-logic",
      "type": "bottleneck",
      "components": ["cpu:apple-silicon", "gpu:apple-silicon-gpu"],
      "relationship": "Heavy AI pathfinding and game logic processing delays frame preparation",
      "conditions": [
        {
          "parameter": "cpu_utilization",
          "operator": "gt",
          "value": 88,
          "unit": "percent"
        },
        {
          "parameter": "gpu_utilization",
          "operator": "lt",
          "value": 55,
          "unit": "percent"
        },
        {
          "parameter": "npc_count",
          "operator": "gt",
          "value": 50,
          "unit": "count"
        }
      ],
      "impact": {
        "performance": { "value": -25, "min": -10, "max": -40 },
        "thermal": { "value": 12 },
        "power": { "value": 18 }
      },
      "confidence": "medium",
      "applicableTo": ["M1", "M1 Pro", "M1 Max", "M2", "M2 Pro", "M2 Max", "M3", "M3 Pro", "M3 Max", "M4", "M4 Pro", "M4 Max"],
      "tags": ["cpu-bound", "ai", "pathfinding", "game-logic"],
      "source": "Gemini Deep Research",
      "sourceDate": "2026",
      "mitigations": [
        "Reduce NPC density/crowd size in settings",
        "Lower AI quality if option exists",
        "Disable certain AI behaviors (ambient NPCs)",
        "Play during off-peak game scenarios"
      ]
    },
    {
      "id": "cpu-bound-asset-decompression",
      "type": "bottleneck",
      "components": ["cpu:apple-silicon", "gpu:apple-silicon-gpu", "storage:nvme"],
      "relationship": "Real-time asset decompression during streaming consumes CPU cycles and causes stutter",
      "conditions": [
        {
          "parameter": "cpu_utilization",
          "operator": "gt",
          "value": 80,
          "unit": "percent"
        },
        {
          "parameter": "disk_read_speed",
          "operator": "gt",
          "value": 2000,
          "unit": "MB/s"
        },
        {
          "parameter": "frame_time_variance",
          "operator": "gt",
          "value": 5,
          "unit": "ms"
        }
      ],
      "impact": {
        "performance": { "value": -20, "min": -5, "max": -35 },
        "thermal": { "value": 8 },
        "power": { "value": 12 }
      },
      "confidence": "medium",
      "applicableTo": ["M1", "M1 Pro", "M1 Max", "M2", "M2 Pro", "M2 Max", "M3", "M3 Pro", "M3 Max", "M4", "M4 Pro", "M4 Max"],
      "tags": ["cpu-bound", "streaming", "decompression", "stutter"],
      "source": "Gemini Deep Research",
      "sourceDate": "2026",
      "mitigations": [
        "Install game on fastest available SSD",
        "Pre-load textures if game supports it",
        "Increase texture streaming budget in settings",
        "Ensure sufficient free storage space"
      ]
    },
    {
      "id": "cpu-bound-single-thread-limitation",
      "type": "bottleneck",
      "components": ["cpu:apple-silicon", "gpu:apple-silicon-gpu"],
      "relationship": "Games with poor multi-threading bottleneck on single P-core while GPU and other cores idle",
      "conditions": [
        {
          "parameter": "single_core_utilization",
          "operator": "gt",
          "value": 95,
          "unit": "percent"
        },
        {
          "parameter": "total_cpu_utilization",
          "operator": "lt",
          "value": 40,
          "unit": "percent"
        },
        {
          "parameter": "gpu_utilization",
          "operator": "lt",
          "value": 70,
          "unit": "percent"
        }
      ],
      "impact": {
        "performance": { "value": -40, "min": -25, "max": -55 },
        "thermal": { "value": 5 },
        "power": { "value": -10 }
      },
      "confidence": "high",
      "applicableTo": ["M1", "M1 Pro", "M1 Max", "M2", "M2 Pro", "M2 Max", "M3", "M3 Pro", "M3 Max", "M4", "M4 Pro", "M4 Max"],
      "tags": ["cpu-bound", "single-thread", "p-core", "legacy"],
      "source": "Apple Silicon Performance Analysis",
      "sourceDate": "2025",
      "mitigations": [
        "Enable macOS Game Mode (automatic in fullscreen)",
        "Check for game patches improving threading",
        "Close all background applications",
        "Lower settings that increase draw calls"
      ],
      "relatedInteractions": ["cpu-bound-draw-call-overhead"]
    },
    {
      "id": "gpu-bound-shader-complexity",
      "type": "bottleneck",
      "components": ["gpu:apple-silicon-gpu", "cpu:apple-silicon"],
      "relationship": "Complex shaders saturate GPU ALUs while CPU waits for frame completion",
      "conditions": [
        {
          "parameter": "gpu_utilization",
          "operator": "gt",
          "value": 95,
          "unit": "percent"
        },
        {
          "parameter": "cpu_utilization",
          "operator": "lt",
          "value": 50,
          "unit": "percent"
        },
        {
          "parameter": "shader_complexity",
          "operator": "eq",
          "value": "high"
        }
      ],
      "formula": {
        "expression": "shader_penalty * (gpu_utilization / 100)",
        "variables": {
          "shader_penalty": "Base shader overhead factor",
          "gpu_utilization": "Current GPU utilization"
        },
        "outputUnit": "frame_time_increase_percent"
      },
      "impact": {
        "performance": { "value": -25, "min": -15, "max": -40 },
        "thermal": { "value": 25 },
        "power": { "value": 30 }
      },
      "confidence": "high",
      "applicableTo": ["M1", "M1 Pro", "M1 Max", "M2", "M2 Pro", "M2 Max", "M3", "M3 Pro", "M3 Max", "M4", "M4 Pro", "M4 Max"],
      "tags": ["gpu-bound", "shaders", "alu", "complexity"],
      "source": "Metal Performance Analysis",
      "sourceDate": "2024",
      "mitigations": [
        "Lower shader quality (effects quality)",
        "Reduce post-processing effects",
        "Disable volumetric lighting/fog",
        "Use simpler material quality settings"
      ]
    },
    {
      "id": "gpu-bound-resolution-fillrate",
      "type": "bottleneck",
      "components": ["gpu:apple-silicon-gpu", "cpu:apple-silicon", "memory:unified"],
      "relationship": "High resolution rendering exceeds GPU fill rate and memory bandwidth",
      "conditions": [
        {
          "parameter": "gpu_utilization",
          "operator": "gt",
          "value": 98,
          "unit": "percent"
        },
        {
          "parameter": "render_resolution",
          "operator": "gte",
          "value": 2560,
          "unit": "horizontal_pixels"
        },
        {
          "parameter": "memory_bandwidth_usage",
          "operator": "gt",
          "value": 80,
          "unit": "percent"
        }
      ],
      "formula": {
        "expression": "(target_pixels / current_pixels) * base_fps",
        "variables": {
          "target_pixels": "Target resolution pixel count",
          "current_pixels": "Current resolution pixel count",
          "base_fps": "FPS at lower resolution"
        },
        "outputUnit": "estimated_fps"
      },
      "impact": {
        "performance": { "value": -35, "min": -20, "max": -50 },
        "thermal": { "value": 30 },
        "power": { "value": 35 }
      },
      "confidence": "high",
      "applicableTo": ["M1", "M1 Pro", "M1 Max", "M2", "M2 Pro", "M2 Max", "M3", "M3 Pro", "M3 Max", "M4", "M4 Pro", "M4 Max"],
      "tags": ["gpu-bound", "resolution", "fillrate", "bandwidth"],
      "source": "Apple GPU Architecture",
      "sourceDate": "2024",
      "mitigations": [
        "Enable MetalFX temporal upscaling",
        "Lower render resolution (use scaling)",
        "Reduce render scale percentage",
        "Use FSR/upscaling if available"
      ]
    },
    {
      "id": "gpu-bound-post-processing",
      "type": "bottleneck",
      "components": ["gpu:apple-silicon-gpu", "cpu:apple-silicon"],
      "relationship": "Heavy post-processing passes consume GPU time in final frame stages",
      "conditions": [
        {
          "parameter": "gpu_utilization",
          "operator": "gt",
          "value": 92,
          "unit": "percent"
        },
        {
          "parameter": "post_processing_enabled",
          "operator": "eq",
          "value": true
        }
      ],
      "impact": {
        "performance": { "value": -20, "min": -10, "max": -30 },
        "thermal": { "value": 15 },
        "power": { "value": 18 }
      },
      "confidence": "medium",
      "applicableTo": ["M1", "M1 Pro", "M1 Max", "M2", "M2 Pro", "M2 Max", "M3", "M3 Pro", "M3 Max", "M4", "M4 Pro", "M4 Max"],
      "tags": ["gpu-bound", "post-processing", "effects", "bloom"],
      "source": "Gemini Deep Research",
      "sourceDate": "2026",
      "mitigations": [
        "Disable motion blur",
        "Lower or disable depth of field",
        "Reduce bloom intensity",
        "Disable film grain and chromatic aberration"
      ]
    },
    {
      "id": "gpu-bound-ray-tracing",
      "type": "bottleneck",
      "components": ["gpu:apple-silicon-gpu", "cpu:apple-silicon"],
      "relationship": "Hardware ray tracing (M3+) significantly increases GPU workload for realistic lighting",
      "conditions": [
        {
          "parameter": "gpu_utilization",
          "operator": "gt",
          "value": 95,
          "unit": "percent"
        },
        {
          "parameter": "ray_tracing_enabled",
          "operator": "eq",
          "value": true
        }
      ],
      "formula": {
        "expression": "base_fps * (1 - rt_penalty)",
        "variables": {
          "base_fps": "FPS without ray tracing",
          "rt_penalty": "Ray tracing overhead (typically 0.3-0.5)"
        },
        "outputUnit": "fps_with_rt"
      },
      "impact": {
        "performance": { "value": -40, "min": -25, "max": -55 },
        "thermal": { "value": 35 },
        "power": { "value": 40 }
      },
      "confidence": "high",
      "applicableTo": ["M3", "M3 Pro", "M3 Max", "M4", "M4 Pro", "M4 Max"],
      "tags": ["gpu-bound", "ray-tracing", "lighting", "m3-plus"],
      "source": "Apple Ray Tracing Architecture",
      "sourceDate": "2024",
      "mitigations": [
        "Use ray tracing on reflections only (not shadows)",
        "Lower ray tracing quality setting",
        "Disable ray tracing entirely for max FPS",
        "Combine with MetalFX upscaling"
      ]
    },
    {
      "id": "gpu-bound-vram-pressure",
      "type": "bottleneck",
      "components": ["gpu:apple-silicon-gpu", "memory:unified"],
      "relationship": "GPU texture/buffer allocation exceeds comfortable unified memory budget causing thrashing",
      "conditions": [
        {
          "parameter": "gpu_memory_usage",
          "operator": "gt",
          "value": 80,
          "unit": "percent"
        },
        {
          "parameter": "memory_pressure",
          "operator": "eq",
          "value": "high"
        }
      ],
      "formula": {
        "expression": "base_performance * (1 - (memory_pressure_factor * 0.4))",
        "variables": {
          "base_performance": "Performance at normal memory pressure",
          "memory_pressure_factor": "Memory pressure level (0-1)"
        },
        "outputUnit": "performance_multiplier"
      },
      "impact": {
        "performance": { "value": -30, "min": -15, "max": -50 },
        "thermal": { "value": 10 },
        "power": { "value": 20 }
      },
      "confidence": "high",
      "applicableTo": ["M1", "M1 Pro", "M1 Max", "M2", "M2 Pro", "M2 Max", "M3", "M3 Pro", "M3 Max", "M4", "M4 Pro", "M4 Max"],
      "tags": ["gpu-bound", "vram", "unified-memory", "thrashing"],
      "source": "macOS Memory Management",
      "sourceDate": "2025",
      "mitigations": [
        "Lower texture quality setting",
        "Reduce texture resolution",
        "Close memory-intensive background apps",
        "Disable high-resolution texture packs"
      ],
      "relatedInteractions": ["unified-memory-contention"]
    },
    {
      "id": "unified-memory-contention",
      "type": "bottleneck",
      "components": ["cpu:apple-silicon", "gpu:apple-silicon-gpu", "memory:unified"],
      "relationship": "Simultaneous high CPU and GPU memory access saturates unified memory bandwidth",
      "conditions": [
        {
          "parameter": "memory_bandwidth_usage",
          "operator": "gt",
          "value": 85,
          "unit": "percent"
        },
        {
          "parameter": "cpu_utilization",
          "operator": "gt",
          "value": 70,
          "unit": "percent"
        },
        {
          "parameter": "gpu_utilization",
          "operator": "gt",
          "value": 70,
          "unit": "percent"
        }
      ],
      "formula": {
        "expression": "((cpu_bw_demand + gpu_bw_demand) / max_bandwidth) * contention_penalty",
        "variables": {
          "cpu_bw_demand": "CPU memory bandwidth demand GB/s",
          "gpu_bw_demand": "GPU memory bandwidth demand GB/s",
          "max_bandwidth": "Maximum unified memory bandwidth",
          "contention_penalty": "Overhead factor from contention"
        },
        "outputUnit": "performance_degradation_percent"
      },
      "impact": {
        "performance": { "value": -25, "min": -10, "max": -40 },
        "thermal": { "value": 20 },
        "power": { "value": 25 }
      },
      "confidence": "high",
      "applicableTo": ["M1", "M1 Pro", "M1 Max", "M2", "M2 Pro", "M2 Max", "M3", "M3 Pro", "M3 Max", "M4", "M4 Pro", "M4 Max"],
      "tags": ["bandwidth", "unified-memory", "contention", "uma"],
      "source": "Apple Silicon Architecture",
      "sourceDate": "2024",
      "mitigations": [
        "Close background applications",
        "Reduce texture streaming distance",
        "Lower geometric detail/LOD bias",
        "Stagger CPU and GPU intensive operations"
      ]
    },
    {
      "id": "balanced-optimal-utilization",
      "type": "synergy",
      "components": ["cpu:apple-silicon", "gpu:apple-silicon-gpu"],
      "relationship": "Optimal performance achieved when CPU and GPU utilization are balanced in 70-85% range",
      "conditions": [
        {
          "parameter": "cpu_utilization",
          "operator": "range",
          "value": { "min": 70, "max": 85 },
          "unit": "percent"
        },
        {
          "parameter": "gpu_utilization",
          "operator": "range",
          "value": { "min": 75, "max": 90 },
          "unit": "percent"
        }
      ],
      "impact": {
        "performance": { "value": 0, "min": -5, "max": 5 },
        "thermal": { "value": 0 },
        "power": { "value": 0 }
      },
      "confidence": "high",
      "applicableTo": ["M1", "M1 Pro", "M1 Max", "M2", "M2 Pro", "M2 Max", "M3", "M3 Pro", "M3 Max", "M4", "M4 Pro", "M4 Max"],
      "tags": ["balanced", "optimal", "target-utilization"],
      "source": "Performance Optimization Best Practices",
      "sourceDate": "2025",
      "mitigations": []
    },
    {
      "id": "e-core-background-benefit",
      "type": "synergy",
      "components": ["cpu:apple-silicon-e-core", "cpu:apple-silicon-p-core", "gpu:apple-silicon-gpu"],
      "relationship": "E-cores handling background tasks free P-cores for game logic, improving frame consistency",
      "conditions": [
        {
          "parameter": "e_core_utilization",
          "operator": "gt",
          "value": 40,
          "unit": "percent"
        },
        {
          "parameter": "p_core_utilization",
          "operator": "lt",
          "value": 80,
          "unit": "percent"
        },
        {
          "parameter": "game_mode_enabled",
          "operator": "eq",
          "value": true
        }
      ],
      "impact": {
        "performance": { "value": 10, "min": 5, "max": 15 },
        "thermal": { "value": -5 },
        "power": { "value": -10 }
      },
      "confidence": "medium",
      "applicableTo": ["M1", "M1 Pro", "M1 Max", "M2", "M2 Pro", "M2 Max", "M3", "M3 Pro", "M3 Max", "M4", "M4 Pro", "M4 Max"],
      "tags": ["e-core", "p-core", "game-mode", "efficiency"],
      "source": "macOS Game Mode Architecture",
      "sourceDate": "2024",
      "mitigations": []
    },
    {
      "id": "p-core-saturation-spillover",
      "type": "bottleneck",
      "components": ["cpu:apple-silicon-p-core", "cpu:apple-silicon-e-core", "gpu:apple-silicon-gpu"],
      "relationship": "When P-cores saturate, game threads spill to slower E-cores causing frame time spikes",
      "conditions": [
        {
          "parameter": "p_core_utilization",
          "operator": "gt",
          "value": 95,
          "unit": "percent"
        },
        {
          "parameter": "e_core_game_threads",
          "operator": "gt",
          "value": 0,
          "unit": "count"
        }
      ],
      "impact": {
        "performance": { "value": -15, "min": -5, "max": -25 },
        "thermal": { "value": 8 },
        "power": { "value": 5 }
      },
      "confidence": "medium",
      "applicableTo": ["M1", "M1 Pro", "M1 Max", "M2", "M2 Pro", "M2 Max", "M3", "M3 Pro", "M3 Max", "M4", "M4 Pro", "M4 Max"],
      "tags": ["p-core", "e-core", "spillover", "frame-time"],
      "source": "Apple Silicon Thread Scheduling",
      "sourceDate": "2025",
      "mitigations": [
        "Ensure macOS Game Mode is active",
        "Close CPU-intensive background apps",
        "Reduce game settings that increase CPU load",
        "Check Activity Monitor for competing processes"
      ]
    },
    {
      "id": "tbdr-geometry-amplification",
      "type": "bottleneck",
      "components": ["gpu:apple-silicon-gpu", "cpu:apple-silicon"],
      "relationship": "TBDR architecture re-processes geometry per tile, amplifying cost of high polygon counts",
      "conditions": [
        {
          "parameter": "polygon_count",
          "operator": "gt",
          "value": 5000000,
          "unit": "triangles_per_frame"
        },
        {
          "parameter": "gpu_utilization",
          "operator": "gt",
          "value": 90,
          "unit": "percent"
        }
      ],
      "formula": {
        "expression": "geometry_cost * tile_count_factor",
        "variables": {
          "geometry_cost": "Base geometry processing cost",
          "tile_count_factor": "Multiplier based on tiles covered by geometry"
        },
        "outputUnit": "gpu_overhead_percent"
      },
      "impact": {
        "performance": { "value": -20, "min": -10, "max": -35 },
        "thermal": { "value": 15 },
        "power": { "value": 18 }
      },
      "confidence": "medium",
      "applicableTo": ["M1", "M1 Pro", "M1 Max", "M2", "M2 Pro", "M2 Max", "M3", "M3 Pro", "M3 Max", "M4", "M4 Pro", "M4 Max"],
      "tags": ["tbdr", "geometry", "tiles", "polygon-count"],
      "source": "Apple GPU TBDR Architecture",
      "sourceDate": "2024",
      "mitigations": [
        "Lower geometry/model quality",
        "Reduce draw distance",
        "Enable LOD (Level of Detail) if available",
        "Reduce vegetation/foliage density"
      ]
    },
    {
      "id": "dynamic-caching-benefit",
      "type": "synergy",
      "components": ["gpu:apple-silicon-gpu", "memory:unified"],
      "relationship": "Dynamic Caching (M3+) improves GPU memory efficiency for geometry-heavy workloads",
      "conditions": [
        {
          "parameter": "gpu_generation",
          "operator": "in",
          "value": ["M3", "M3 Pro", "M3 Max", "M4", "M4 Pro", "M4 Max"]
        },
        {
          "parameter": "geometry_workload",
          "operator": "eq",
          "value": "heavy"
        }
      ],
      "impact": {
        "performance": { "value": 15, "min": 5, "max": 25 },
        "thermal": { "value": -5 },
        "power": { "value": -8 }
      },
      "confidence": "medium",
      "applicableTo": ["M3", "M3 Pro", "M3 Max", "M4", "M4 Pro", "M4 Max"],
      "tags": ["dynamic-caching", "m3-plus", "geometry", "efficiency"],
      "source": "Apple Silicon M3 Architecture",
      "sourceDate": "2024",
      "mitigations": []
    },
    {
      "id": "translation-layer-cpu-overhead",
      "type": "bottleneck",
      "components": ["cpu:apple-silicon", "gpu:apple-silicon-gpu"],
      "relationship": "DirectX-to-Metal translation (GPTK/CrossOver) adds CPU overhead for each draw call",
      "conditions": [
        {
          "parameter": "translation_layer_active",
          "operator": "eq",
          "value": true
        },
        {
          "parameter": "cpu_utilization",
          "operator": "gt",
          "value": 70,
          "unit": "percent"
        }
      ],
      "formula": {
        "expression": "native_fps * translation_efficiency",
        "variables": {
          "native_fps": "Expected native Metal FPS",
          "translation_efficiency": "Translation overhead factor (typically 0.6-0.85)"
        },
        "outputUnit": "translated_fps"
      },
      "impact": {
        "performance": { "value": -30, "min": -15, "max": -45 },
        "thermal": { "value": 15 },
        "power": { "value": 20 }
      },
      "confidence": "high",
      "applicableTo": ["M1", "M1 Pro", "M1 Max", "M2", "M2 Pro", "M2 Max", "M3", "M3 Pro", "M3 Max", "M4", "M4 Pro", "M4 Max"],
      "tags": ["gptk", "crossover", "translation", "directx", "cpu-overhead"],
      "source": "GPTK Performance Analysis",
      "sourceDate": "2025",
      "mitigations": [
        "Prefer native macOS/Metal game versions",
        "Update to latest GPTK/CrossOver version",
        "Lower draw call-heavy settings",
        "Close background applications"
      ]
    },
    {
      "id": "high-refresh-cpu-demand",
      "type": "bottleneck",
      "components": ["cpu:apple-silicon", "gpu:apple-silicon-gpu"],
      "relationship": "High refresh rate gaming (120Hz+) doubles CPU frame preparation demands",
      "conditions": [
        {
          "parameter": "target_fps",
          "operator": "gte",
          "value": 120,
          "unit": "fps"
        },
        {
          "parameter": "cpu_utilization",
          "operator": "gt",
          "value": 80,
          "unit": "percent"
        }
      ],
      "formula": {
        "expression": "frame_time_budget / target_fps_factor",
        "variables": {
          "frame_time_budget": "Time available per frame in ms",
          "target_fps_factor": "120fps = 8.33ms vs 60fps = 16.67ms"
        },
        "outputUnit": "frame_time_ms"
      },
      "impact": {
        "performance": { "value": -20, "min": -10, "max": -35 },
        "thermal": { "value": 20 },
        "power": { "value": 25 }
      },
      "confidence": "medium",
      "applicableTo": ["M1 Pro", "M1 Max", "M2 Pro", "M2 Max", "M3 Pro", "M3 Max", "M4 Pro", "M4 Max"],
      "tags": ["high-refresh", "120fps", "frame-time", "proMotion"],
      "source": "High Refresh Rate Gaming Analysis",
      "sourceDate": "2025",
      "mitigations": [
        "Target 60fps for CPU-limited games",
        "Reduce settings that increase CPU load",
        "Enable VRR (Variable Refresh Rate)",
        "Use frame rate limiter to reduce overhead"
      ]
    }
  ],
  "heuristics": [
    {
      "id": "cpu-bottleneck-detection",
      "name": "CPU Bottleneck Detection",
      "description": "How to detect when CPU is limiting GPU performance",
      "indicators": [
        "GPU utilization < 70% while CPU > 85%",
        "Frame time variance > 5ms (inconsistent frame delivery)",
        "Single core maxed (>95%) while others idle",
        "Low draw calls per frame despite high CPU usage",
        "High CPU wait time visible in Metal System Trace",
        "Game threads migrating to E-cores in Activity Monitor"
      ],
      "thresholds": {
        "cpu_utilization_min": 85,
        "gpu_utilization_max": 70,
        "frame_variance_max_ms": 5,
        "confidence": "high"
      },
      "remediation": [
        "Enable macOS Game Mode (enter fullscreen)",
        "Reduce physics quality setting",
        "Lower AI/simulation complexity",
        "Enable multi-threading options if available",
        "Close background applications (browsers, Electron apps)",
        "Reduce draw call-heavy settings (shadow quality, view distance)",
        "Check Activity Monitor for CPU-intensive processes"
      ],
      "relatedInteractions": [
        "cpu-bound-draw-call-overhead",
        "cpu-bound-physics-simulation",
        "cpu-bound-ai-game-logic",
        "cpu-bound-single-thread-limitation"
      ]
    },
    {
      "id": "gpu-bottleneck-detection",
      "name": "GPU Bottleneck Detection",
      "description": "How to detect when GPU is the performance limiter",
      "indicators": [
        "GPU utilization > 95% sustained",
        "CPU utilization < 60% with consistent frame times",
        "Resolution/quality changes significantly impact FPS",
        "Memory pressure warning in Activity Monitor",
        "High GPU temperature approaching thermal limits",
        "Frame rate scales linearly with render resolution"
      ],
      "thresholds": {
        "gpu_utilization_min": 95,
        "cpu_utilization_max": 60,
        "confidence": "high"
      },
      "remediation": [
        "Enable MetalFX temporal upscaling",
        "Lower render resolution or use scaling",
        "Reduce texture quality",
        "Disable or lower ray tracing (M3+ only)",
        "Turn off post-processing effects (motion blur, DoF, bloom)",
        "Lower shader/effects quality",
        "Reduce shadow quality and resolution",
        "Disable anti-aliasing or use lower setting"
      ],
      "relatedInteractions": [
        "gpu-bound-shader-complexity",
        "gpu-bound-resolution-fillrate",
        "gpu-bound-post-processing",
        "gpu-bound-ray-tracing"
      ]
    },
    {
      "id": "memory-bandwidth-bottleneck-detection",
      "name": "Memory Bandwidth Bottleneck Detection",
      "description": "How to detect unified memory bandwidth saturation",
      "indicators": [
        "Both CPU (>70%) and GPU (>70%) highly utilized simultaneously",
        "Performance drops during texture streaming moments",
        "Memory pressure indicator yellow/red in Activity Monitor",
        "Swap usage increasing during gameplay",
        "Stutter when entering new areas with many assets",
        "Performance improves when closing memory-heavy apps"
      ],
      "thresholds": {
        "cpu_utilization_min": 70,
        "gpu_utilization_min": 70,
        "memory_pressure": "yellow_or_red",
        "confidence": "medium"
      },
      "remediation": [
        "Close memory-intensive background applications",
        "Reduce texture quality setting",
        "Lower texture streaming distance",
        "Disable high-resolution texture packs",
        "Reduce geometric detail/LOD aggressiveness",
        "Install game on fastest SSD",
        "Consider more unified memory for future upgrade"
      ],
      "relatedInteractions": [
        "unified-memory-contention",
        "gpu-bound-vram-pressure"
      ]
    },
    {
      "id": "thermal-throttling-detection",
      "name": "Thermal Throttling Detection",
      "description": "How to detect performance loss from thermal management",
      "indicators": [
        "Performance degrades after 15-30 minutes of sustained load",
        "CPU/GPU frequency drops visible in monitoring tools",
        "Fan noise increases significantly before performance drop",
        "Initial FPS higher than sustained FPS (fanless devices)",
        "GPU temperature >95C or CPU >100C",
        "Performance recovers after cooling period"
      ],
      "thresholds": {
        "gpu_temp_max_celsius": 95,
        "cpu_temp_max_celsius": 100,
        "performance_degradation_threshold_percent": 10,
        "sustained_load_duration_minutes": 15,
        "confidence": "high"
      },
      "remediation": [
        "Enable High Power Mode (MacBook Pro only)",
        "Ensure adequate ventilation around device",
        "Use laptop stand for airflow (MacBook)",
        "Clean dust from vents if applicable",
        "Lower ambient room temperature",
        "Consider external cooling pad",
        "Accept lower settings for sustained performance",
        "Take breaks to allow thermal recovery"
      ],
      "deviceSpecific": {
        "macbookAir": "Fanless design - expect throttling after ~45 min sustained",
        "macbookPro": "Enable High Power Mode in System Settings > Battery",
        "macMini": "Ensure not enclosed; needs open airflow",
        "macStudio": "Should sustain indefinitely with proper ventilation"
      },
      "relatedInteractions": []
    },
    {
      "id": "translation-overhead-detection",
      "name": "Translation Layer Overhead Detection",
      "description": "How to detect performance loss from DirectX-to-Metal translation",
      "indicators": [
        "Higher CPU usage than expected for game complexity",
        "Game runs via GPTK, CrossOver, or Whisky",
        "CPU bottleneck symptoms despite simple graphics",
        "Performance significantly lower than native Mac games",
        "Draw call-heavy games perform worse than shader-heavy games"
      ],
      "thresholds": {
        "cpu_overhead_factor": 1.3,
        "fps_reduction_typical_percent": 25,
        "confidence": "high"
      },
      "remediation": [
        "Check if native Mac/Metal version exists",
        "Update translation layer to latest version (GPTK 2.0+)",
        "Enable DXVK or D3DMetal optimizations",
        "Reduce settings that increase draw calls",
        "Lower crowd/NPC density",
        "Reduce shadow cascade count",
        "Accept ~20-30% performance overhead as normal"
      ],
      "relatedInteractions": [
        "translation-layer-cpu-overhead"
      ]
    },
    {
      "id": "balanced-system-detection",
      "name": "Balanced System Detection",
      "description": "How to confirm system is well-optimized with no major bottlenecks",
      "indicators": [
        "CPU utilization 70-85% range",
        "GPU utilization 75-90% range",
        "Consistent frame times (low variance <3ms)",
        "No thermal throttling occurring",
        "Memory pressure green in Activity Monitor",
        "FPS meets target (60/120) consistently"
      ],
      "thresholds": {
        "cpu_utilization_min": 70,
        "cpu_utilization_max": 85,
        "gpu_utilization_min": 75,
        "gpu_utilization_max": 90,
        "frame_variance_max_ms": 3,
        "confidence": "high"
      },
      "remediation": [
        "System is optimally configured",
        "Consider increasing quality settings slightly",
        "Could try higher resolution if GPU headroom exists",
        "Enable additional effects if CPU headroom exists",
        "Current settings represent good balance"
      ],
      "relatedInteractions": [
        "balanced-optimal-utilization",
        "e-core-background-benefit"
      ]
    }
  ]
}
