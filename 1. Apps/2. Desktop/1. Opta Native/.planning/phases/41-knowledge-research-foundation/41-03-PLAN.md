# Plan 41-03: Apple Silicon Unified Memory Research

**Phase:** 41 - Knowledge Research Foundation
**Domain:** Memory Architecture & Management
**Focus:** Apple Silicon Unified Memory mastery

---

## Metadata

```yaml
plan_id: 41-03
title: Apple Silicon Unified Memory Architecture Research
estimated_effort: research
wave: 1
autonomous: true
dependencies: []
outputs:
  - .planning/research/prompts/41-03-memory-architecture.md
  - .planning/research/templates/memory-knowledge-template.md
```

---

## Objective

Create optimal Gemini Deep Research prompts that will produce comprehensive unified memory knowledge documents for Apple Silicon. Focus on how memory pressure affects performance, optimal texture/asset management, and VRAM equivalent calculations.

---

## Tasks

### Task 1: Craft Unified Memory Deep Research Prompt

**Goal:** Create a Gemini 2.5 Pro Deep Research prompt that explores Apple Silicon unified memory architecture with optimization focus.

**Prompt to Create:**

```markdown
# Gemini Deep Research Prompt: Apple Silicon Unified Memory Architecture

## Research Mission

You are conducting deep research to build an optimization knowledge base for Apple Silicon's unified memory architecture. The goal is understanding exactly how memory capacity and bandwidth affect gaming performance, when memory pressure causes problems, and what can be optimized.

## Core Questions to Explore

### Architecture Fundamentals
1. **Unified Memory Basics**
   - How does unified memory differ from traditional CPU RAM + GPU VRAM?
   - Memory configurations by chip: 8GB, 16GB, 24GB, 32GB, 64GB, 128GB, 192GB
   - Which configurations are available on which chips?
   - How is memory allocated between CPU, GPU, and Neural Engine?

2. **Memory Bandwidth**
   - Bandwidth by chip variant:
     - M1: 68.25 GB/s (128-bit)
     - M1 Pro/Max: 200-400 GB/s
     - M2 series bandwidth
     - M3 series bandwidth
     - M4 series bandwidth
   - How does bandwidth scale with memory channels?
   - When does bandwidth become a bottleneck?

3. **Memory Latency**
   - Latency characteristics of unified memory
   - Comparison to DDR5/GDDR6 latency
   - How does latency affect CPU-bound vs GPU-bound workloads?

### Performance Curves (CRITICAL)
4. **VRAM Equivalent Calculations**
   - How much unified memory equals X GB of dedicated VRAM?
   - At what texture quality does an 8GB Mac become VRAM-limited?
   - 16GB vs 24GB vs 32GB: What games/settings does each unlock?
   - Formula or table: Game VRAM requirement → Unified memory needed

5. **Memory Pressure Thresholds**
   - At what % utilization does performance degrade?
   - What happens when memory pressure is "yellow" vs "red" in Activity Monitor?
   - Swap behavior on Apple Silicon: How does SSD swap affect gaming?
   - Memory pressure curves: FPS impact at 50%, 70%, 90%, 95% utilization

6. **Texture Streaming Behavior**
   - How does macOS/Metal handle texture streaming from unified memory?
   - Pop-in and streaming stutter: When does it happen?
   - Optimal texture quality by memory configuration
   - High-resolution texture pack requirements

### Optimization Levers
7. **Memory Management for Gaming**
   - Impact of closing background apps on available memory
   - Safari tab memory usage patterns
   - System processes that consume significant memory
   - Memory cleanup techniques that work on macOS

8. **Game-Specific Memory Patterns**
   - Open-world games: Memory requirements and streaming patterns
   - Texture-heavy games (AAA titles): VRAM-equivalent needs
   - Indie/lightweight games: Typical memory footprint
   - Emulators and translation layers: Memory overhead

9. **Metal Memory Hints**
   - Metal resource storage modes and their performance implications
   - Shared vs Private vs Managed storage modes
   - When does Metal automatically optimize memory?
   - What can developers/users influence?

### Cross-Domain Interactions
10. **Memory ↔ GPU Interactions**
    - GPU texture memory usage patterns
    - Render target memory requirements by resolution
    - Frame buffer sizes: 1080p vs 1440p vs 4K vs 5K

11. **Memory ↔ CPU Interactions**
    - CPU cache and memory bandwidth relationship
    - When does CPU memory access compete with GPU?
    - Game asset loading: CPU memory patterns

12. **Memory ↔ Thermal Interactions**
    - Does memory have thermal limits?
    - Memory controller throttling behavior
    - Impact of thermal throttling on memory bandwidth

## Output Format Requirements

Structure your findings as:

1. **Executive Summary** - Key memory optimization insights (1 page max)
2. **Configuration Tables** - Memory by chip, bandwidth, typical allocations
3. **VRAM Equivalence Table** - Unified memory → Effective VRAM mapping
4. **Memory Pressure Curves** - Performance vs utilization
5. **Optimization Guidelines** - What users can actually control
6. **Cross-Reference Matrix** - Memory interactions with GPU/CPU/Thermals

## Research Depth Guidance

- Focus on gaming-relevant scenarios, not general computing
- Include real-world examples: "Game X needs Y GB to run at Z settings"
- Quantify memory pressure impacts with FPS deltas
- Address the common question: "Is 8GB/16GB enough for gaming?"
- Flag uncertain data with confidence levels
```

**Output:** `.planning/research/prompts/41-03-memory-architecture.md`

---

### Task 2: Create Memory Knowledge Document Template

**Goal:** Create a structured template for capturing memory research findings.

**Template Structure:**

```markdown
# Apple Silicon Unified Memory Knowledge Base

## Document Metadata
- **Generated:** [Date]
- **Source:** Gemini 2.5 Pro Deep Research
- **Domain:** Memory Architecture & Optimization
- **Confidence:** [High/Medium/Low per section]

---

## 1. Hardware Specifications

### Memory Configurations by Chip

| Chip | Min | Standard | Max | Bandwidth |
|------|-----|----------|-----|-----------|
| M1 | 8GB | 8-16GB | 16GB | 68.25 GB/s |
| M1 Pro | 16GB | 16-32GB | 32GB | 200 GB/s |
| M1 Max | 32GB | 32-64GB | 64GB | 400 GB/s |
| M1 Ultra | 64GB | 64-128GB | 128GB | 800 GB/s |
| M2 | 8GB | 8-24GB | 24GB | 100 GB/s |
| ... | ... | ... | ... | ... |

### Memory Channels and Architecture

| Chip | Channels | Bus Width | Notes |
|------|----------|-----------|-------|
| M1 | X | 128-bit | ... |
| M1 Pro | X | X-bit | ... |
| ... | ... | ... | ... |

---

## 2. VRAM Equivalence

### Unified Memory → Effective VRAM

| Unified Memory | Effective VRAM | Max Texture Quality | Notes |
|----------------|----------------|---------------------|-------|
| 8GB | ~X GB | Low-Medium | Budget gaming |
| 16GB | ~X GB | Medium-High | Mainstream gaming |
| 24GB | ~X GB | High-Ultra | Comfortable headroom |
| 32GB | ~X GB | Ultra + Mods | High-end gaming |
| 64GB+ | ~X GB | Unlimited | Professional/enthusiast |

### Game VRAM Requirements Mapping

| Game VRAM Requirement | Minimum Unified | Recommended Unified |
|-----------------------|-----------------|---------------------|
| 4GB | 8GB | 16GB |
| 6GB | 16GB | 24GB |
| 8GB | 16GB | 32GB |
| 12GB+ | 32GB | 64GB |

---

## 3. Memory Pressure Curves

### Performance vs Utilization

| Utilization | FPS Impact | Symptoms | Action |
|-------------|------------|----------|--------|
| <50% | None | Normal | Optimal |
| 50-70% | None | Normal | Fine |
| 70-85% | Minimal (-X%) | May see stutters | Monitor |
| 85-95% | Moderate (-X%) | Stutters, swap | Reduce settings |
| >95% | Severe (-X%+) | Heavy stuttering | Critical |

### Swap Behavior Impact

- Swap activation threshold: X% utilization
- SSD swap speed: X GB/s
- Gaming with swap active: [description of impact]
- Recommendations for avoiding swap during gaming

---

## 4. Texture Quality Guidelines

### By Memory Configuration

| Memory | Recommended Texture Setting | Notes |
|--------|----------------------------|-------|
| 8GB | Low-Medium | Watch utilization |
| 16GB | Medium-High | Comfortable for most |
| 24GB | High-Ultra | AAA friendly |
| 32GB+ | Ultra | No compromises |

### Specific Game Examples

| Game | 8GB Setting | 16GB Setting | 24GB Setting |
|------|-------------|--------------|--------------|
| [Game A] | Low | High | Ultra |
| [Game B] | Medium | High | Ultra |
| ... | ... | ... | ... |

---

## 5. Memory Optimization Opportunities

### What Users Can Control

| Action | Memory Saved | FPS Impact |
|--------|--------------|------------|
| Close Safari (10 tabs) | ~X GB | +X FPS if pressured |
| Close background apps | ~X GB | Variable |
| Reduce texture quality | ~X GB VRAM | Depends on game |
| Lower resolution | ~X GB | Depends on resolution |

### System Memory Hogs

| Process | Typical Usage | Notes |
|---------|---------------|-------|
| Safari | X MB per tab | Major consumer |
| Finder | X MB | Usually small |
| Spotlight | X MB | During indexing |
| ... | ... | ... |

---

## 6. Cross-Domain Interactions

### Memory ↔ GPU

- Texture memory requirements by resolution:
  - 1080p: ~X GB
  - 1440p: ~X GB
  - 4K: ~X GB
- GPU render targets: X MB per buffer
- Total GPU memory usage formula: [formula]

### Memory ↔ CPU

- Game asset loading patterns: [description]
- CPU-side memory for physics, AI: ~X MB typical
- Competition for bandwidth: [when it matters]

### Memory ↔ Thermal

- Memory controller thermal behavior: [description]
- Impact on sustained bandwidth: [quantified if applicable]

---

## 7. Resolution and Memory

### Frame Buffer Memory by Resolution

| Resolution | Frame Buffer Size | With AA | With HDR |
|------------|------------------|---------|----------|
| 1080p | X MB | X MB | X MB |
| 1440p | X MB | X MB | X MB |
| 4K | X MB | X MB | X MB |
| 5K | X MB | X MB | X MB |

---

## 8. Confidence Notes

| Section | Confidence | Notes |
|---------|------------|-------|
| Configurations | High | Official specs |
| VRAM equivalence | Medium | Empirical estimates |
| Pressure curves | Medium | Observed patterns |
| Game examples | Medium | Varies by update |
```

**Output:** `.planning/research/templates/memory-knowledge-template.md`

---

## Success Criteria

- [ ] Deep Research prompt explores unified memory comprehensively
- [ ] VRAM equivalence calculations are addressed
- [ ] Memory pressure thresholds are explored
- [ ] Template captures gaming-relevant memory data
- [ ] "Is X GB enough?" questions are answerable from findings

---

## Notes

- User runs prompt with Gemini 2.5 Pro Deep Research offline
- Findings populate template and feed Phase 47 Configuration Calculator
- This is research phase — validation against real hardware comes later
