---
phase: 43-settings-interaction-engine
plan: 04
type: execute
wave: 2
depends_on: ["43-01"]
files_modified: [.planning/research/knowledge/settings/tradeoffs/ray-tracing.json, .planning/research/knowledge/settings/tradeoffs/apple-silicon.json]
autonomous: true
---

<objective>
Create impact propagation data showing how changing one setting affects others.

Purpose: Document the cascading effects of settings changes — when you change Setting A, what happens to Settings B, C, D? This is critical for the user's vision of understanding "if I enable this, what else changes?"

Output:
- `ray-tracing.json` - RT feature cascade effects and dependencies
- `apple-silicon.json` - macOS/Apple Silicon specific settings interactions
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/43-settings-interaction-engine/43-CONTEXT.md
@.planning/research/knowledge/schema/settings-schema.json
@.planning/research/knowledge/settings/README.md
@.planning/research/knowledge/synergies/bottlenecks/gpu-cpu-bottlenecks.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create ray tracing cascade data</name>
  <files>.planning/research/knowledge/settings/tradeoffs/ray-tracing.json</files>
  <action>
Create a JSON file documenting RT feature cascades and impact propagation.

**RT Cascade Effects:**

1. **RT Reflections Impact Chain:**
   - Enabling RT Reflections → requires hardware RT support
   - RT Reflections → increases VRAM usage (+2-4GB typical)
   - RT Reflections + High resolution → compounds GPU load
   - RT Reflections quality levels → linear cost scaling

2. **RT Shadows Impact Chain:**
   - RT Shadows → replaces shadow maps (not additive)
   - RT Shadows + large outdoor areas → expensive
   - RT Shadows + multiple light sources → cost multiplies
   - RT Shadows quality affects ray count

3. **RT Global Illumination Impact:**
   - RT GI → most expensive RT feature
   - RT GI + RT Reflections → combined BVH traversal cost
   - RT GI enables removal of baked lighting
   - RT GI quality dramatically affects performance

4. **Combined RT Budget:**
   - Total RT budget for M3 Pro: ~30% GPU headroom
   - RT Reflections only: 15-20% GPU cost
   - RT + RT Shadows: 25-35% GPU cost
   - All RT features: 40-60% GPU cost (requires Max/Ultra)

5. **RT Dependencies:**
   - RT requires hardware support (M3+)
   - RT requires Metal 3 on macOS
   - RT typically requires DLSS/FSR to maintain framerate
   - RT benefits from higher VRAM (16GB+ recommended)

For each entry include:
- `type`: "tradeoff" or "dependency"
- `trigger`: the setting change
- `affects`: array of affected settings/metrics
- `propagation`: how the effect spreads
- `magnitude`: quantified impact

Target: 18-22 RT cascade entries.
  </action>
  <verify>cat .planning/research/knowledge/settings/tradeoffs/ray-tracing.json | python3 -c "import json,sys; d=json.load(sys.stdin); print(f'Valid JSON with {len(d.get(\"interactions\", []))} RT cascade entries')"</verify>
  <done>ray-tracing.json exists with 18+ RT cascade entries</done>
</task>

<task type="auto">
  <name>Task 2: Create Apple Silicon settings data</name>
  <files>.planning/research/knowledge/settings/tradeoffs/apple-silicon.json</files>
  <action>
Create a JSON file documenting Apple Silicon-specific settings interactions.

**Apple Silicon Specifics:**

1. **Metal API Settings:**
   - MetalFX Upscaling → exclusive to macOS
   - MetalFX Temporal vs Spatial → different use cases
   - Metal triple buffering → impacts input lag
   - Metal shader compilation → precompile vs JIT

2. **Power Mode Interactions:**
   - High Power Mode → unlocks thermal headroom on MacBook Pro
   - High Power Mode + High settings → sustainable on plugged in
   - Low Power Mode → reduces P-core clocks, limits GPU
   - Automatic Mode → dynamic based on workload

3. **ProMotion Display Settings:**
   - ProMotion 120Hz → requires more GPU headroom
   - VRR with ProMotion → smooth variable frame rates
   - 60Hz lock → saves power, easier to hit
   - ProMotion + DLSS → 120fps becomes achievable

4. **Unified Memory Implications:**
   - No separate VRAM → game texture settings affect system
   - High textures on 8GB Mac → swap risk
   - 16GB+ allows Ultra textures
   - Memory pressure indicator as early warning

5. **Thermal-Performance Trade-offs:**
   - MacBook Air fanless → aggressive settings = throttle
   - MacBook Pro → sustained high settings possible
   - Mac Studio/Pro → no thermal concerns

6. **Game Porting Toolkit Specifics (if applicable):**
   - DirectX to Metal translation overhead
   - DXVK vs native Metal performance
   - Memory management differences

For each entry:
- `type`: "tradeoff" or "dependency"
- `platform`: "macos"
- `hardware`: applicable hardware (Air, Pro 14, Pro 16, Mini, Studio)
- `interaction`: the settings relationship
- `recommendation`: what Opta should suggest

Target: 20-25 Apple Silicon entries.
  </action>
  <verify>cat .planning/research/knowledge/settings/tradeoffs/apple-silicon.json | python3 -c "import json,sys; d=json.load(sys.stdin); print(f'Valid JSON with {len(d.get(\"interactions\", []))} Apple Silicon entries')"</verify>
  <done>apple-silicon.json exists with 20+ Apple Silicon settings entries</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] ray-tracing.json is valid JSON
- [ ] Contains 18+ RT cascade entries
- [ ] apple-silicon.json is valid JSON
- [ ] Contains 20+ Apple Silicon entries
- [ ] RT cascades show propagation chains
- [ ] Apple Silicon covers power modes, ProMotion, UMA
</verification>

<success_criteria>
- All tasks completed
- RT cascade data shows how RT features compound
- Apple Silicon data covers macOS-specific interactions
- Impact propagation enables "what if" queries
</success_criteria>

<output>
After completion, create `.planning/phases/43-settings-interaction-engine/43-04-SUMMARY.md`
</output>
