---
phase: 01-app-foundation
plan: 02
type: execute
wave: 2
depends_on: ["01-01"]
files_modified: [Opta Scan/ContentView.swift, Opta Scan/Views/CaptureView.swift, Opta Scan/Views/HistoryView.swift, Opta Scan/Views/SettingsView.swift, Opta Scan/Views/Components/OptaTabBar.swift, Opta Scan/Assets.xcassets]
autonomous: false
---

<objective>
Build the main navigation structure and configure the asset catalog with Opta color sets.

Purpose: Establish the app's navigation flow (capture → questions → results) with tab-based structure and proper asset management.
Output: Working tabbed navigation with placeholder views and configured color assets.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
@~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/IOS_AESTHETIC_GUIDE.md
@.planning/phases/01-app-foundation/01-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Build main navigation structure with TabView</name>
  <files>Opta Scan/ContentView.swift, Opta Scan/Views/CaptureView.swift, Opta Scan/Views/HistoryView.swift, Opta Scan/Views/SettingsView.swift, Opta Scan/Views/Components/OptaTabBar.swift</files>
  <action>
Implement the navigation structure from IOS_AESTHETIC_GUIDE.md:

1. **OptaTabBar.swift** - Custom tab bar component:
```swift
struct OptaTabBar: View {
    @Binding var selectedTab: Tab

    enum Tab: String, CaseIterable {
        case capture = "camera.fill"
        case history = "clock"
        case settings = "gearshape"
    }
    // ... full implementation from IOS_AESTHETIC_GUIDE.md
}
```
- Use SF Symbols for icons
- Apply haptic feedback on tab change
- Use optaPurple for active state
- Apply .glassSubtle() for background

2. **ContentView.swift** - Main container:
```swift
struct ContentView: View {
    @State private var selectedTab: OptaTabBar.Tab = .capture

    var body: some View {
        ZStack(alignment: .bottom) {
            // Tab content
            Group {
                switch selectedTab {
                case .capture: CaptureView()
                case .history: HistoryView()
                case .settings: SettingsView()
                }
            }
            .frame(maxWidth: .infinity, maxHeight: .infinity)

            // Custom tab bar
            OptaTabBar(selectedTab: $selectedTab)
        }
        .background(Color.optaBackground)
    }
}
```

3. **CaptureView.swift** - Primary capture screen placeholder:
- Full screen with optaBackground
- Center: Large camera icon (SF Symbol)
- Text: "Capture anything, optimize everything"
- This is where photo capture will go (Phase 2)

4. **HistoryView.swift** - History screen placeholder:
- NavigationStack wrapper
- Title: "History"
- Empty state: "No scans yet" message
- List will show scan history (Phase 6)

5. **SettingsView.swift** - Settings screen placeholder:
- NavigationStack wrapper
- Title: "Settings"
- Placeholder list items for future settings
- Version number at bottom

All views must:
- Use Color.optaBackground as base
- Apply design system typography
- Use SF Symbols only
- Support safe area properly (don't overlap tab bar)
  </action>
  <verify>All view files exist: `ls -la "Opta Scan/Views/"` shows CaptureView.swift, HistoryView.swift, SettingsView.swift and Components/OptaTabBar.swift</verify>
  <done>TabView navigation works with three tabs (Capture, History, Settings), each displaying placeholder content with correct Opta styling.</done>
</task>

<task type="auto">
  <name>Task 2: Configure asset catalog with color sets</name>
  <files>Opta Scan/Assets.xcassets</files>
  <action>
Create asset catalog color sets that match the design system:

1. Create Assets.xcassets structure (if not exists):
```
Assets.xcassets/
├── AccentColor.colorset/
│   └── Contents.json
├── OptaBackground.colorset/
│   └── Contents.json
├── OptaSurface.colorset/
│   └── Contents.json
├── OptaPurple.colorset/
│   └── Contents.json
└── Contents.json
```

2. **AccentColor.colorset** - Set to optaPurple (#8b5cf6):
```json
{
  "colors" : [
    {
      "color" : {
        "color-space" : "srgb",
        "components" : {
          "red" : "0.545",
          "green" : "0.361",
          "blue" : "0.965",
          "alpha" : "1.000"
        }
      },
      "idiom" : "universal"
    }
  ],
  "info" : { "author" : "xcode", "version" : 1 }
}
```

3. **OptaBackground.colorset** - OLED optimized (#09090b):
```json
{
  "colors" : [
    {
      "color" : {
        "color-space" : "srgb",
        "components" : {
          "red" : "0.035",
          "green" : "0.035",
          "blue" : "0.043",
          "alpha" : "1.000"
        }
      },
      "idiom" : "universal"
    }
  ],
  "info" : { "author" : "xcode", "version" : 1 }
}
```

4. Create color sets for: OptaSurface, OptaSurfaceElevated, OptaBorder, OptaPurple, OptaBlue, OptaGreen, OptaAmber, OptaRed

5. Add AppIcon.appiconset placeholder (can be empty for now)

Note: These asset colors complement the programmatic colors in OptaColors.swift. Both should have identical values.
  </action>
  <verify>Asset catalog structure exists: `ls -la "Opta Scan/Assets.xcassets/"` shows multiple .colorset directories</verify>
  <done>Asset catalog configured with all Opta brand colors as named color sets, AccentColor set to optaPurple.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete Opta Scan app foundation with custom tab navigation and design system</what-built>
  <how-to-verify>
    1. Open project in Xcode: `open "Opta Scan.xcodeproj"` or `open "Opta Scan.xcworkspace"`
    2. Build and run on simulator (iOS 17+)
    3. Verify dark background (#09090b, not pure black)
    4. Tap each tab - verify:
       - Camera tab: Shows capture placeholder with camera icon
       - History tab: Shows "History" title and empty state
       - Settings tab: Shows "Settings" title
    5. Check tab bar:
       - Glass effect visible on tab bar background
       - Active tab shows purple icon and dot indicator
       - Haptic feedback on tab change (test on device if possible)
    6. Verify no layout issues (safe areas, notch handling)
  </how-to-verify>
  <resume-signal>Type "approved" if the app looks correct, or describe any issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] All view files created in correct locations
- [ ] TabView navigation switches between three screens
- [ ] Design system colors applied throughout
- [ ] SF Symbols used for all icons
- [ ] Glass effect visible on tab bar
- [ ] Asset catalog contains all color sets
- [ ] Human verification approved
</verification>

<success_criteria>

- Working tab-based navigation with Capture, History, Settings tabs
- Custom OptaTabBar with glass styling and haptics
- Placeholder views for each tab with proper Opta aesthetics
- Asset catalog configured with brand colors
- Visual verification passed by user
</success_criteria>

<output>
After completion, create `.planning/phases/01-app-foundation/01-02-SUMMARY.md`
</output>
