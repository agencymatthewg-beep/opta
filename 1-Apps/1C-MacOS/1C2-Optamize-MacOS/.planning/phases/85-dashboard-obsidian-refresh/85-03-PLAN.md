---
phase: 85-dashboard-obsidian-refresh
plan: 03
type: execute
wave: 2
depends_on: ["85-01"]
files_modified:
  - opta-native/OptaApp/OptaApp/Views/Components/QuickActions.swift
  - opta-native/OptaApp/OptaApp/Views/DashboardView.swift
autonomous: true
---

<objective>
Rebuild QuickActions with obsidian button styling and branch hover effects, then refresh the DashboardView layout for obsidian depth hierarchy.

Purpose: Complete the dashboard visual refresh by applying the obsidian aesthetic to quick action buttons and the overall dashboard layout (status section, spacing, depth layering).

Output: QuickActions with obsidian-dark buttons and violet branch-energy hover/active states. DashboardView with obsidian depth hierarchy (foreground/content/background layers) and refined spacing.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/STATE.md
@.planning/phases/85-dashboard-obsidian-refresh/85-01-PLAN.md
@opta-native/OptaApp/OptaApp/Views/Components/QuickActions.swift
@opta-native/OptaApp/OptaApp/Views/DashboardView.swift
</context>

<tasks>
<task type="auto">
  <name>Task 1: QuickActions obsidian refresh</name>
  <files>opta-native/OptaApp/OptaApp/Views/Components/QuickActions.swift</files>
  <action>
Rebuild QuickActionButton with obsidian styling and branch-energy hover effects:

**Background change:**
Replace the current `buttonBackground` (Color "09090B" + ultraThinMaterial) with:
- Base: Color(hex: "0A0A0F") (deep obsidian)
- NO ultraThinMaterial (remove glass effect entirely)
- Subtle inner shadow for depth perception

**Hover state (branch energy effect):**
Replace the current color-based hover with branch-energy-inspired violet glow:
- On hover: border transitions from Color.white.opacity(0.1) to Color(hex: "8B5CF6").opacity(0.4)
- On hover: subtle violet radial gradient appears at cursor position (approximated as center glow)
- On hover: icon color shifts toward violet: `color.opacity(0.7) + Color(hex: "8B5CF6").opacity(0.3)` blend
- Transition: 0.2s ease-in-out (via withAnimation)

**Press state (branch pulse):**
- On press: scale 0.95 (tighter than current 0.97)
- On press: border brightens to Color(hex: "8B5CF6").opacity(0.6) briefly
- Spring response: 0.15, dampingFraction 0.7 (snappier than current)

**Active/loading state:**
- When isLoading: violet pulsing border (using animation loop)
- Border alternates between opacity 0.2 and 0.5 with 0.8s period

**Shadow:**
- Default: no shadow (OLED optimization)
- Hover: shadow color Color(hex: "8B5CF6").opacity(0.15), radius 12, y: 4

**Keep:**
- Button layout (VStack with icon + title)
- The action callbacks and coreManager interaction
- Reduce motion support (skip hover/press animations when enabled)
- PlainButtonStyle and simultaneousGesture for press detection

**Per-button accent colors:**
Replace individual button colors (purple, cyan, green) with unified violet base but keep subtle differentiation:
- Optimize: Color(hex: "8B5CF6") (primary violet)
- Scan Games: Color(hex: "7C3AED") (deeper violet)
- Score: Color(hex: "A855F7") (lighter violet)
This keeps visual distinction while staying in the branch-energy palette.
  </action>
  <verify>Project compiles, buttons render with obsidian background and violet hover states</verify>
  <done>QuickActionButton uses obsidian base, branch-energy violet hover/press/loading states, no glass material</done>
</task>

<task type="auto">
  <name>Task 2: DashboardView obsidian layout refresh</name>
  <files>opta-native/OptaApp/OptaApp/Views/DashboardView.swift</files>
  <action>
Refresh the DashboardView layout with obsidian depth hierarchy and branch-energy color palette:

**Background:**
- Keep Color(hex: "09090B") as the scroll view background (already OLED-optimized obsidian black)

**Status section (statusSection) obsidian refresh:**
Replace the current `.fill(Color.white.opacity(0.03))` background with obsidian styling:
- Background: Color(hex: "0A0A0F") (consistent obsidian base)
- Border: 1px stroke of Color(hex: "8B5CF6").opacity(0.1) (subtle violet edge)
- Corner radius: keep 12

**Status indicators (thermalColor, memoryPressureColor):**
Keep the functional colors (green/yellow/orange/red) but wrap indicator circles with a subtle violet ring when in nominal state:
- Nominal: Circle with violet shadow glow (Color(hex: "8B5CF6").opacity(0.2), radius: 3)
- Warning/Critical: Keep existing colors, no violet (functional priority)

**Depth hierarchy via opacity layering:**
Apply depth-based opacity to establish visual hierarchy:
- Top (OptaTextView, ringSection): Full brightness — these are focal points
- Middle (telemetrySection): 0.95 opacity — content layer, slight recession
- Context (textZoneSection): 0.9 opacity — contextual, subtly recessed
- Bottom (statusSection): 0.85 opacity — ambient info, most recessed

Apply this via `.opacity()` modifiers on each section. When reduceMotion is true, use uniform 1.0 opacity (no depth layering for accessibility).

**Spacing refinement:**
- Increase verticalSpacing from 20 to 24 (more breathing room between obsidian panels)
- Add 8px extra padding above telemetrySection and below textZoneSection for visual grouping

**Score overlay (in ringSection):**
Update the score text and grade badge colors to match obsidian palette:
- Score number: keep .white (high contrast against dark ring)
- Grade badge background: replace Capsule().fill(gradeColor.opacity(0.15)) with Color(hex: "0A0A0F") + violet border
- Grade badge: unified violet tint: Color(hex: "8B5CF6") for all grades (the letter differentiates, not color)

Wait — actually keep grade colors distinct (gold/green/blue/purple/orange/red) as they serve a functional purpose. Only update the badge background to obsidian:
- Capsule().fill(Color(hex: "0A0A0F"))
- Capsule().stroke(gradeColor.opacity(0.3), lineWidth: 1)

**Stealth mode indicator:**
Update the stealth mode active indicator color from Color(hex: "8B5CF6") to stay the same (already violet, matches obsidian palette). No change needed.

**Keep:**
- Layout structure (VStack in ScrollView in GeometryReader)
- OptaRingView and RenderCoordinator integration
- OptaTextView and OptaTextZone components
- All coreManager bindings and state management
- Reduce motion environment variable
- All preview code
  </action>
  <verify>Project compiles, dashboard renders with obsidian depth hierarchy</verify>
  <done>DashboardView has obsidian status section, depth-based opacity layering, refined spacing, and unified violet accents on non-functional elements</done>
</task>
</tasks>

<verification>
Before declaring plan complete:
- [ ] Project compiles without errors
- [ ] QuickActions renders with obsidian backgrounds (no glass/ultraThinMaterial)
- [ ] QuickActions hover state shows violet border glow
- [ ] DashboardView status section has obsidian background + violet border
- [ ] DashboardView sections have depth-based opacity hierarchy
- [ ] DashboardView spacing is 24px between sections
- [ ] Accessibility: reduceMotion skips hover animations and depth opacity
- [ ] Grade badge maintains distinct functional colors
</verification>

<success_criteria>
- QuickActionButton: obsidian base, violet hover/press/loading states, no glass
- DashboardView: obsidian status section, depth hierarchy via opacity, 24px spacing
- Unified branch-energy violet palette (8B5CF6 family) across non-functional accents
- Functional colors preserved (grade colors, thermal, memory pressure)
- No regressions in coreManager integration or navigation
</success_criteria>

<output>
After completion, create `.planning/phases/85-dashboard-obsidian-refresh/85-03-SUMMARY.md`
</output>
