# Plan 14-01: Expertise-Adaptive Explanations

wave: 1
autonomous: true

## Overview

Adapt explanation depth based on user's expertise level. Show "Advanced:" technical details for power users, simple explanations for beginners.

## Tasks

### 1. Create Adaptive Explanation Component
**File**: `src/components/AdaptiveExplanation.tsx` (new)

```tsx
interface AdaptiveExplanationProps {
  simple: string;
  standard: string;
  advanced: string;
  technicalDetails?: string;
}

export function AdaptiveExplanation({
  simple,
  standard,
  advanced,
  technicalDetails,
}: AdaptiveExplanationProps) {
  const { expertiseLevel } = useExpertise();
  const [showTechnical, setShowTechnical] = useState(false);

  const explanation = {
    simple,
    standard,
    power: advanced,
  }[expertiseLevel];

  return (
    <div className="space-y-2">
      <p className="text-sm text-muted-foreground">{explanation}</p>

      {expertiseLevel === 'power' && technicalDetails && (
        <motion.div
          initial={false}
          animate={{ height: showTechnical ? 'auto' : 0 }}
          className="overflow-hidden"
        >
          <div className="glass-subtle rounded p-3 mt-2">
            <p className="text-xs font-mono text-muted-foreground">
              <span className="text-primary font-semibold">Advanced: </span>
              {technicalDetails}
            </p>
          </div>
        </motion.div>
      )}

      {expertiseLevel === 'power' && technicalDetails && (
        <button
          onClick={() => setShowTechnical(!showTechnical)}
          className="text-xs text-primary hover:underline"
        >
          {showTechnical ? 'Hide' : 'Show'} technical details
        </button>
      )}
    </div>
  );
}
```

### 2. Add Game Context to Explanations
**File**: `src/utils/explanations.ts` (new)

```tsx
export function getOptimizationExplanation(
  type: string,
  game?: Game,
  expertiseLevel: ExpertiseLevel = 'standard'
): { text: string; technical?: string } {
  const explanations = {
    resolution_reduction: {
      simple: `Makes your screen look a bit different to make ${game?.name || 'your game'} run faster.`,
      standard: `Reduces resolution to boost FPS. Expect ~15% more frames in ${game?.name || 'your game'}.`,
      power: `Drops render resolution while maintaining UI scale. GPU renders fewer pixels per frame.`,
      technical: `Native 1440p → 1080p reduces pixel count by 44% (2560×1440=3.7M → 1920×1080=2.1M). Linear correlation with fill-rate bound scenarios.`,
    },
    texture_quality: {
      simple: `Makes surfaces in the game simpler to help it run better.`,
      standard: `Lowers texture detail to reduce VRAM usage and improve stability.`,
      power: `Reduces texture mipmap levels, freeing VRAM for frame buffer headroom.`,
      technical: `High→Medium typically halves VRAM footprint per texture asset. Critical for GPUs with <6GB VRAM.`,
    },
    // ... more optimization types
  };

  return explanations[type]?.[expertiseLevel] || { text: 'Optimization applied.' };
}
```

### 3. Update Optimization Explanation Component
**File**: `src/components/OptimizationExplanation.tsx`

Integrate adaptive explanations:

```tsx
export function OptimizationExplanation({ optimization, game }) {
  const { expertiseLevel } = useExpertise();

  const explanation = getOptimizationExplanation(
    optimization.type,
    game,
    expertiseLevel
  );

  return (
    <AdaptiveExplanation
      simple={explanation.simple}
      standard={explanation.standard}
      advanced={explanation.power}
      technicalDetails={explanation.technical}
    />
  );
}
```

### 4. Adapt Onboarding Tone
**File**: `src/components/Onboarding.tsx`

Make onboarding more conversational with Opta's voice:

```tsx
const ONBOARDING_STEPS = {
  welcome: {
    simple: {
      title: "Hi there!",
      subtitle: "I'm Opta. I'll help make your computer run better.",
    },
    standard: {
      title: "Welcome to Opta",
      subtitle: "Let's optimize your system for peak performance.",
    },
    power: {
      title: "Opta Initialized",
      subtitle: "Ready to analyze your system configuration.",
    },
  },
  // ...
};
```

### 5. Update Learn Mode to Use Adaptive System
**File**: `src/components/LearnModeExplanation.tsx`

```tsx
export function LearnModeExplanation({ topic }) {
  const { expertiseLevel } = useExpertise();
  const { isVerbose } = useCommunicationStyle();
  const { learnModeEnabled } = useLearnMode();

  if (!learnModeEnabled) return null;

  const content = LEARN_MODE_CONTENT[topic];
  const explanation = content[expertiseLevel];

  return (
    <motion.div
      initial={{ opacity: 0, y: 10 }}
      animate={{ opacity: 1, y: 0 }}
      className="glass-subtle rounded-lg p-3 mt-2"
    >
      <div className="flex items-start gap-2">
        <Lightbulb className="w-4 h-4 text-primary mt-0.5" />
        <div>
          <p className="text-sm">{isVerbose ? explanation.full : explanation.short}</p>
          {expertiseLevel === 'power' && explanation.technical && (
            <p className="text-xs font-mono text-muted-foreground mt-1">
              {explanation.technical}
            </p>
          )}
        </div>
      </div>
    </motion.div>
  );
}
```

## Verification

1. Set expertise to "simple" → Explanations are friendly, non-technical
2. Set expertise to "standard" → Balanced explanations with context
3. Set expertise to "power" → Technical details available, "Advanced:" sections
4. Game-specific context appears in explanations
5. Onboarding tone matches expertise level

## Files Modified

- `src/components/AdaptiveExplanation.tsx` (new)
- `src/utils/explanations.ts` (new)
- `src/components/OptimizationExplanation.tsx`
- `src/components/Onboarding.tsx`
- `src/components/LearnModeExplanation.tsx`

## Estimated Duration

25-30 minutes
