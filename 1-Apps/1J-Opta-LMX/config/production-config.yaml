# Opta-LMX Production Configuration — Mono512 (Mac Studio M3 Ultra, 512GB)
# Install to: ~/.opta-lmx/config.yaml on the Mac Studio

server:
  host: "0.0.0.0"          # LAN-accessible (192.168.188.11:1234)
  port: 1234
  workers: 1
  timeout_sec: 600          # 10 min — large models can be slow on first prompt

models:
  default_model: null       # Set after first model download
  models_directory: "/Users/Shared/Opta-LMX/models"
  auto_load: []             # Add model IDs here to load on startup
  use_batching: true

memory:
  max_memory_percent: 85    # Conservative for 512GB — leaves ~77GB headroom for OS + apps
  auto_evict_lru: true

logging:
  level: "INFO"
  format: "structured"
  file: "/var/log/opta-lmx/opta-lmx.log"
  max_file_bytes: 52428800   # 50MB — rotates at this size
  backup_count: 5            # Keeps 5 backups (~250MB total max)

routing:
  default_model: null       # Model for "auto" alias — set after first load
  aliases:
    code: []                # e.g. ["mlx-community/Qwen2.5-Coder-32B-Instruct-4bit"]
    reasoning: []           # e.g. ["mlx-community/DeepSeek-R1-Distill-Qwen-32B-4bit"]
    chat: []                # e.g. ["mlx-community/Llama-3.2-8B-Instruct-4bit"]

security:
  admin_key: null           # Set to a string for production admin auth
