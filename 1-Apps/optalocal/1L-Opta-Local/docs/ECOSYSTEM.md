# Opta Local — Ecosystem Context

> How this app relates to every other app, service, and bot in the Opta ecosystem.

---

## Dependency Map

### This App Depends On

| Dependency | Type | What For | Critical? |
|-----------|------|----------|-----------|
| **Opta LMX** | Service | All API endpoints — chat, admin, models, sessions, SSE events | Yes — app is useless without it |
| **Opta CLI** | Tool | Session format compatibility, future agent-as-a-service | No — enhances but not required |
| **@opta/ui** | Package | React component library (Web platform only) | Yes (Web) |
| **@opta/tsconfig** | Package | TypeScript configuration preset (Web) | Yes (Web) |
| **@opta/eslint-config** | Package | ESLint configuration (Web) | Yes (Web) |
| **Cloudflare Tunnel** | Service | WAN access from outside LAN | No — LAN works without it |

### Apps That Depend On This

| App | How | Data Contract |
|-----|-----|--------------|
| None currently | — | — |

### Shared Resources

| Resource | Shared With | Type |
|----------|------------|------|
| Opta Design System | All Opta apps | Colors, typography, glass effects, animation |
| @opta/ui components | AICompare, AI Components, Opta Life Web | React component library |
| Session format (JSON) | Opta CLI | `~/.config/opta/sessions/*.json` schema |
| LMX API types | Opta CLI (TypeScript types) | OpenAI-compatible request/response |

---

## Data Contracts

### APIs This App Consumes

```
Service: Opta LMX (FastAPI)
Host: 192.168.188.11:1234 (LAN) or *.trycloudflare.com (WAN)
Auth: X-Admin-Key header (admin endpoints), Bearer token (chat API)

Endpoints:
  POST /v1/chat/completions  — Streaming chat (OpenAI-compatible)
  GET  /v1/models            — List available models
  GET  /admin/status          — Server health snapshot
  GET  /admin/events          — SSE live metrics stream
  POST /admin/models/load     — Load model into VRAM
  POST /admin/models/unload   — Unload model from VRAM
  GET  /admin/models/{id}/info — Model details + VRAM estimate
  GET  /admin/sessions        — List sessions (future)
  GET  /admin/sessions/{id}   — Get session (future)
```

### APIs This App Exposes

None — Opta Local is a pure consumer/client.

---

## Bot Interactions

| Bot | Interaction | Direction |
|-----|------------|-----------|
| Claude Code | Reads OPIS docs when working on this project | Bot → Docs |
| Opta CLI agent | Session sharing (future) | Bidirectional |

---

## Port Assignments

| Service | Port | Network |
|---------|------|---------|
| Opta LMX (API) | 1234 | LAN (192.168.188.11) |
| Opta Local Web (dev) | 3004 | localhost |

**Reference:** Full port map at `~/Synced/AI26/1-SOT/1A-Machines/`

---

## Ecosystem Position

```
┌──────────────────────────────────────────────────┐
│                 Opta Ecosystem                    │
│                                                  │
│  ┌──────────┐    ┌──────────┐    ┌────────────┐ │
│  │ Optamize │    │  Opta    │    │  Opta      │ │
│  │  MacOS   │    │   CLI    │    │  Local     │ │
│  │ (Desktop │    │ (Term)   │    │ (Web)  │ │
│  │  Power)  │    │          │    │            │ │
│  └────┬─────┘    └────┬─────┘    └─────┬──────┘ │
│       │               │               │         │
│       └───────────────┼───────────────┘         │
│                       │                          │
│              ┌────────┴────────┐                 │
│              │    Opta LMX     │                 │
│              │  (Mac Studio)   │                 │
│              │  Inference API  │                 │
│              └─────────────────┘                 │
└──────────────────────────────────────────────────┘
```

---

*Update when integrations change. Cross-reference with APPS-INDEX.md.*

*Generated by OPIS v2.0 — 2026-02-18*
