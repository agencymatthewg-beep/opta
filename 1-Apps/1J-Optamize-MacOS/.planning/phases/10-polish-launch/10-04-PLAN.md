---
phase: 10-polish-launch
plan: 04
type: execute
wave: 2
depends_on: [10-02]
files_modified: [src/components/LearnModeToggle.tsx, src/components/LearnModeContext.tsx, src/components/LearnModeExplanation.tsx, src/pages/Dashboard.tsx, src/pages/Games.tsx, src/App.tsx]
autonomous: true
---

<objective>
Implement Learn Mode - a quick toggle for educational explanations throughout the app.

Purpose: Fulfill the "Educational Empowerment" pillar from PROJECT.md. Learn Mode enables comprehensive visual explanations across the board, helping users understand what Opta is doing and why. The toggle is always visible in the UI (not buried in Settings).

Output: Learn Mode toggle component, context provider, and integrated explanations.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/MUST_HAVE.md
@.planning/phases/10-polish-launch/10-CONTEXT.md
@DESIGN_SYSTEM.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Learn Mode context and toggle</name>
  <files>src/components/LearnModeContext.tsx, src/components/LearnModeToggle.tsx</files>
  <action>
Create the Learn Mode context provider and toggle:

```tsx
// src/components/LearnModeContext.tsx
import { createContext, useContext, useState, useEffect, ReactNode } from 'react';

interface LearnModeContextType {
  isLearnMode: boolean;
  setLearnMode: (enabled: boolean) => void;
  toggleLearnMode: () => void;
}

const LearnModeContext = createContext<LearnModeContextType | undefined>(undefined);

export function LearnModeProvider({ children }: { children: ReactNode }) {
  const [isLearnMode, setIsLearnMode] = useState(() => {
    const saved = localStorage.getItem('opta_learn_mode');
    return saved ? JSON.parse(saved) : false;
  });

  useEffect(() => {
    localStorage.setItem('opta_learn_mode', JSON.stringify(isLearnMode));
  }, [isLearnMode]);

  const setLearnMode = (enabled: boolean) => setIsLearnMode(enabled);
  const toggleLearnMode = () => setIsLearnMode(!isLearnMode);

  return (
    <LearnModeContext.Provider value={{ isLearnMode, setLearnMode, toggleLearnMode }}>
      {children}
    </LearnModeContext.Provider>
  );
}

export function useLearnMode() {
  const context = useContext(LearnModeContext);
  if (!context) {
    throw new Error('useLearnMode must be used within LearnModeProvider');
  }
  return context;
}
```

```tsx
// src/components/LearnModeToggle.tsx
import { motion } from 'framer-motion';
import { GraduationCap, X } from 'lucide-react';
import { useLearnMode } from './LearnModeContext';
import { cn } from '@/lib/utils';

export function LearnModeToggle() {
  const { isLearnMode, toggleLearnMode } = useLearnMode();

  return (
    <motion.button
      className={cn(
        "fixed bottom-4 right-4 z-50 flex items-center gap-2 px-4 py-2 rounded-full",
        "glass border border-border/30 shadow-lg",
        isLearnMode && "bg-primary/20 border-primary/50"
      )}
      onClick={toggleLearnMode}
      whileHover={{ scale: 1.05 }}
      whileTap={{ scale: 0.95 }}
      aria-label={isLearnMode ? "Turn off Learn Mode" : "Turn on Learn Mode"}
    >
      <GraduationCap className={cn(
        "w-5 h-5",
        isLearnMode ? "text-primary" : "text-muted-foreground"
      )} />
      <span className={cn(
        "text-sm font-medium",
        isLearnMode ? "text-primary" : "text-muted-foreground"
      )}>
        Learn Mode
      </span>
      {isLearnMode && (
        <motion.span
          initial={{ scale: 0 }}
          animate={{ scale: 1 }}
          className="text-xs bg-primary text-primary-foreground px-1.5 py-0.5 rounded-full"
        >
          ON
        </motion.span>
      )}
    </motion.button>
  );
}
```

Integrate into App.tsx:
- Wrap app with LearnModeProvider
- Add LearnModeToggle to Layout (always visible)
  </action>
  <verify>Toggle appears in UI, state persists across sessions</verify>
  <done>Learn Mode context and toggle implemented</done>
</task>

<task type="auto">
  <name>Task 2: Create explanation component system</name>
  <files>src/components/LearnModeExplanation.tsx</files>
  <action>
Create a reusable explanation component that shows when Learn Mode is active:

```tsx
// src/components/LearnModeExplanation.tsx
import { motion, AnimatePresence } from 'framer-motion';
import { HelpCircle, Info, Lightbulb, ChevronRight } from 'lucide-react';
import { useLearnMode } from './LearnModeContext';
import { cn } from '@/lib/utils';

interface LearnModeExplanationProps {
  title: string;
  description: string;
  details?: string;
  type?: 'info' | 'tip' | 'how-it-works';
  position?: 'inline' | 'tooltip' | 'panel';
  className?: string;
}

export function LearnModeExplanation({
  title,
  description,
  details,
  type = 'info',
  position = 'inline',
  className,
}: LearnModeExplanationProps) {
  const { isLearnMode } = useLearnMode();

  if (!isLearnMode) return null;

  const Icon = {
    info: Info,
    tip: Lightbulb,
    'how-it-works': HelpCircle,
  }[type];

  const colors = {
    info: 'text-primary border-primary/30 bg-primary/10',
    tip: 'text-success border-success/30 bg-success/10',
    'how-it-works': 'text-warning border-warning/30 bg-warning/10',
  }[type];

  return (
    <AnimatePresence>
      <motion.div
        initial={{ opacity: 0, y: -8, height: 0 }}
        animate={{ opacity: 1, y: 0, height: 'auto' }}
        exit={{ opacity: 0, y: -8, height: 0 }}
        className={cn(
          "rounded-lg border p-3 my-2",
          colors,
          className
        )}
      >
        <div className="flex items-start gap-2">
          <Icon className="w-4 h-4 mt-0.5 flex-shrink-0" />
          <div>
            <div className="font-medium text-sm">{title}</div>
            <div className="text-sm opacity-80">{description}</div>
            {details && (
              <details className="mt-2">
                <summary className="text-xs cursor-pointer flex items-center gap-1 opacity-70 hover:opacity-100">
                  <ChevronRight className="w-3 h-3" />
                  Technical details
                </summary>
                <p className="text-xs mt-1 opacity-70 pl-4">{details}</p>
              </details>
            )}
          </div>
        </div>
      </motion.div>
    </AnimatePresence>
  );
}

// Compact variant for inline use
export function LearnModeHint({ children, hint }: { children: React.ReactNode; hint: string }) {
  const { isLearnMode } = useLearnMode();

  return (
    <span className="relative group">
      {children}
      {isLearnMode && (
        <span className="absolute bottom-full left-1/2 -translate-x-1/2 mb-1 px-2 py-1 text-xs bg-primary text-primary-foreground rounded whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity">
          {hint}
        </span>
      )}
    </span>
  );
}
```
  </action>
  <verify>Explanation components render correctly when Learn Mode is on</verify>
  <done>Explanation component system created</done>
</task>

<task type="auto">
  <name>Task 3: Add explanations to Dashboard</name>
  <files>src/pages/Dashboard.tsx, src/components/TelemetryCard.tsx, src/components/ProcessList.tsx</files>
  <action>
Integrate Learn Mode explanations into Dashboard components:

1. **TelemetryCard explanations**:
```tsx
// In TelemetryCard.tsx
import { LearnModeExplanation } from './LearnModeExplanation';

// After the meter component:
<LearnModeExplanation
  title={`Understanding ${label}`}
  description={explanations[type]?.short}
  details={explanations[type]?.technical}
  type="how-it-works"
/>

const explanations = {
  cpu: {
    short: "Shows how much of your processor is being used. Lower is better for gaming headroom.",
    technical: "Measures CPU utilization across all cores. High sustained usage (>80%) may cause frame drops."
  },
  gpu: {
    short: "Shows graphics card usage. In games, you typically want this near 95-99% (GPU-bound).",
    technical: "GPU utilization from NVIDIA/AMD drivers. Low GPU + high CPU = CPU bottleneck."
  },
  memory: {
    short: "RAM usage. Keep some headroom (70-80%) for smooth gaming.",
    technical: "Physical memory usage. When full, Windows uses slow disk swap (paging)."
  }
};
```

2. **ProcessList explanations**:
```tsx
// Add explanation about categories
<LearnModeExplanation
  title="Process Categories"
  description="Processes are grouped by type. 'Background' processes are safe to stop for gaming."
  details="System processes are protected. Apps include browsers and productivity tools. Background includes updaters, cloud sync, and services."
  type="tip"
/>
```

3. **Stealth Mode explanation**:
```tsx
// Before the Stealth Mode button
<LearnModeExplanation
  title="What is Stealth Mode?"
  description="One-click termination of non-essential background processes to free up CPU and RAM for gaming."
  details="Uses a safe list to protect system-critical processes. Terminated processes will restart after gaming session."
  type="how-it-works"
/>
```
  </action>
  <verify>Dashboard shows explanations when Learn Mode is enabled</verify>
  <done>Dashboard Learn Mode explanations added</done>
</task>

<task type="auto">
  <name>Task 4: Add explanations to Games page</name>
  <files>src/pages/Games.tsx, src/components/GameCard.tsx</files>
  <action>
Add Learn Mode explanations to Games features:

1. **Game detection explanation**:
```tsx
<LearnModeExplanation
  title="How Game Detection Works"
  description="Opta scans Steam, Epic Games, and GOG Galaxy libraries to find your installed games."
  details="Reads libraryfolders.vdf (Steam), manifests (Epic), and GOG registry entries. Config files are located in standard game directories."
  type="how-it-works"
/>
```

2. **Optimization preview explanation**:
```tsx
// Before applying optimizations
<LearnModeExplanation
  title="What These Settings Do"
  description="Each setting trades something for performance. Resolution affects sharpness, shadows affect atmosphere, etc."
  details="Settings are rated by impact: High Impact = big FPS gain, Low Impact = minor gain. Quality Impact shows visual difference."
  type="info"
/>
```

3. **Before/after benchmarking explanation**:
```tsx
<LearnModeExplanation
  title="How Benchmarking Works"
  description="Opta measures FPS before and after changes to prove actual improvement."
  details="Runs automated test scene or monitors actual gameplay. Results show min/max/avg FPS and frame time consistency."
  type="how-it-works"
/>
```

4. **Per-setting explanations**:
For each optimization setting, show a Learn Mode explanation:
- Resolution scaling: "Renders at lower resolution then upscales. Noticeable but big FPS gain."
- Shadow quality: "Shadows are expensive to render. Medium usually looks nearly as good as Ultra."
- Anti-aliasing: "Smooths jagged edges. TAA is efficient, MSAA is expensive."
  </action>
  <verify>Games page shows relevant explanations when Learn Mode is on</verify>
  <done>Games page Learn Mode explanations added</done>
</task>

<task type="auto">
  <name>Task 5: Add explanations to Score page</name>
  <files>src/pages/Score.tsx</files>
  <action>
Add Learn Mode explanations to Score features:

1. **Dimension explanations**:
```tsx
// For Performance dimension
<LearnModeExplanation
  title="Performance Dimension"
  description="Measures raw gaming capability: FPS potential, stability (no stutters), and load times."
  details="Weighted 40% of total score. FPS Potential from benchmark gains, Stability from frame time variance, Load Times from storage optimizations."
  type="info"
/>

// For Experience dimension
<LearnModeExplanation
  title="Experience Dimension"
  description="Quality of gaming experience: visual fidelity preserved, thermals, and system responsiveness."
  details="Weighted 35% of total score. Higher score means gains without sacrificing quality or overheating."
  type="info"
/>

// For Competitive dimension
<LearnModeExplanation
  title="Competitive Dimension"
  description="Factors that matter in ranked games: input lag, network performance, and background interference."
  details="Weighted 25% of total score. Measures process priority optimizations and background activity reduction."
  type="info"
/>
```

2. **Wow factors explanations**:
```tsx
// Money saved
<LearnModeExplanation
  title="How 'Money Saved' is Calculated"
  description="Maps your FPS improvement to equivalent hardware upgrade costs."
  details="10-15% gain ≈ RAM upgrade ($150), 25-40% ≈ GPU tier up ($400), 40%+ ≈ flagship GPU ($600+)."
  type="tip"
/>

// Percentile rank
<LearnModeExplanation
  title="Understanding Your Percentile"
  description="Shows how your system compares to others with similar hardware."
  details="Hardware tier auto-detected from GPU/CPU. Percentile calculated against community data for your tier."
  type="how-it-works"
/>
```

3. **Leaderboard explanation**:
```tsx
<LearnModeExplanation
  title="Leaderboard Comparisons"
  description="Compare your score against users with similar hardware, same price tier, or globally."
  details="Similar Hardware: Same GPU family + CPU tier. Price Tier: Budget/Mid-range/High-end/Enthusiast. Global: All Opta users."
  type="info"
/>
```
  </action>
  <verify>Score page shows explanations when Learn Mode is on</verify>
  <done>Score page Learn Mode explanations added</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Learn Mode toggle visible and functional
- [ ] Toggle state persists across sessions
- [ ] Explanations appear only when Learn Mode is on
- [ ] Dashboard has explanations for telemetry, processes, Stealth Mode
- [ ] Games page has explanations for detection, settings, benchmarking
- [ ] Score page has explanations for dimensions, wow factors, leaderboard
- [ ] Explanations are helpful and match Opta's voice
- [ ] `npm run build` succeeds
</verification>

<success_criteria>
- All tasks completed
- Learn Mode toggle always visible (not buried in Settings)
- Comprehensive explanations across all major features
- Explanations have title, description, and optional technical details
- Voice is educational without being condescending
- Smooth animations when explanations appear/disappear
</success_criteria>

<output>
After completion, create `.planning/phases/10-polish-launch/10-04-SUMMARY.md`
</output>
