# Plan 12-02: Loading & Error States

wave: 1
autonomous: true

## Overview

Add missing loading states and improve error handling throughout the app.

## Tasks

### 1. Add Loading Skeleton for Recommendations
**File**: `src/pages/Games.tsx`

Recommendations load silently with no loading indicator.

**Fix**: Add skeleton while loading:
```tsx
{loadingRecommendations ? (
  <div className="space-y-3">
    {[1, 2, 3].map(i => (
      <div key={i} className="glass-subtle rounded-lg p-4 animate-pulse">
        <div className="h-4 bg-muted/20 rounded w-3/4 mb-2" />
        <div className="h-3 bg-muted/20 rounded w-1/2" />
      </div>
    ))}
  </div>
) : (
  <PersonalizedRecommendations ... />
)}
```

### 2. Fix Error Retry Button Behavior
**File**: `src/pages/Games.tsx` (lines 478-519)

When retry fails, button stays in loading state.

**Fix**: Reset loading state on error:
```tsx
const handleRetry = async () => {
  setRetryLoading(true);
  try {
    await refetch();
  } catch (err) {
    // Error already handled by query
  } finally {
    setRetryLoading(false);  // Always reset
  }
};
```

### 3. Add Error Handling to ConflictWarning
**File**: `src/components/ConflictWarning.tsx`

Silent failure when conflict detection errors.

**Fix**: Add error state display:
```tsx
const { conflicts, error, isLoading } = useConflicts();

if (error) {
  return (
    <Alert variant="warning" className="glass-subtle">
      <AlertTriangle className="w-4 h-4" />
      <AlertDescription>
        Could not check for conflicting tools.
        <Button variant="link" onClick={refetch}>Retry</Button>
      </AlertDescription>
    </Alert>
  );
}
```

### 4. Show "Coming Soon" for Incomplete Score Buttons
**File**: `src/pages/Score.tsx` (lines 20-33)

Share and Export buttons do nothing (console.log only).

**Fix**: Disable with tooltip:
```tsx
<Tooltip>
  <TooltipTrigger asChild>
    <Button variant="outline" disabled>
      <Share2 className="w-4 h-4 mr-2" />
      Share
    </Button>
  </TooltipTrigger>
  <TooltipContent>Coming in v1.2</TooltipContent>
</Tooltip>
```

## Verification

1. Select a game → See loading skeleton while recommendations load
2. Trigger network error → Click retry → Button resets after attempt
3. Force conflict check error → See warning with retry option
4. Visit Score page → Hover Share/Export → See "Coming in v1.2"

## Files Modified

- `src/pages/Games.tsx`
- `src/components/ConflictWarning.tsx`
- `src/pages/Score.tsx`

## Estimated Duration

15-20 minutes
