<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Opta Local V2 Features â€” Complete Guide</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Sora:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap');

  :root {
    --void: #09090b;
    --surface: #18181b;
    --elevated: #27272a;
    --border: #3f3f46;
    --text-primary: #fafafa;
    --text-secondary: #a1a1aa;
    --text-muted: #52525b;
    --primary: #8b5cf6;
    --primary-glow: #a855f7;
    --neon-blue: #3b82f6;
    --neon-green: #22c55e;
    --neon-amber: #f59e0b;
    --neon-red: #ef4444;
    --neon-cyan: #06b6d4;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: var(--void);
    color: var(--text-primary);
    font-family: 'Sora', -apple-system, sans-serif;
    line-height: 1.6;
    overflow-x: hidden;
  }

  /* Noise overlay */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    opacity: 0.015;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
    pointer-events: none;
    z-index: 9999;
  }

  /* Ambient glow */
  .ambient-glow {
    position: fixed;
    width: 600px;
    height: 600px;
    border-radius: 50%;
    filter: blur(200px);
    opacity: 0.06;
    pointer-events: none;
    z-index: 0;
  }
  .ambient-glow.purple { background: var(--primary); top: -200px; right: -100px; }
  .ambient-glow.blue { background: var(--neon-blue); bottom: -200px; left: -100px; }

  .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 40px 24px 80px;
    position: relative;
    z-index: 1;
  }

  /* Glass panels */
  .glass {
    background: rgba(24, 24, 27, 0.6);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid rgba(255,255,255,0.08);
    border-radius: 16px;
    position: relative;
    overflow: hidden;
  }
  .glass::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.12) 50%, transparent 100%);
  }

  .glass-subtle {
    background: rgba(24, 24, 27, 0.35);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid rgba(255,255,255,0.05);
    border-radius: 12px;
  }

  .glass-strong {
    background: rgba(39, 39, 42, 0.7);
    backdrop-filter: blur(30px);
    -webkit-backdrop-filter: blur(30px);
    border: 1px solid rgba(255,255,255,0.12);
    border-radius: 16px;
  }

  /* Hero */
  .hero {
    text-align: center;
    padding: 80px 20px 60px;
    position: relative;
  }
  .hero-badge {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 6px 16px;
    border-radius: 100px;
    background: rgba(139, 92, 246, 0.12);
    border: 1px solid rgba(139, 92, 246, 0.25);
    color: var(--primary-glow);
    font-size: 12px;
    font-weight: 600;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    margin-bottom: 24px;
    animation: pulse-glow 3s ease-in-out infinite;
  }
  @keyframes pulse-glow {
    0%, 100% { box-shadow: 0 0 20px rgba(139, 92, 246, 0.1); }
    50% { box-shadow: 0 0 40px rgba(139, 92, 246, 0.2); }
  }
  .hero h1 {
    font-size: clamp(36px, 5vw, 56px);
    font-weight: 800;
    background: linear-gradient(135deg, #fafafa 0%, #a78bfa 50%, #818cf8 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 16px;
    line-height: 1.1;
  }
  .hero p {
    color: var(--text-secondary);
    font-size: 18px;
    max-width: 600px;
    margin: 0 auto;
  }

  /* Stats bar */
  .stats-bar {
    display: flex;
    justify-content: center;
    gap: 32px;
    flex-wrap: wrap;
    margin: 40px 0 60px;
  }
  .stat-item {
    text-align: center;
  }
  .stat-value {
    font-size: 32px;
    font-weight: 700;
    font-variant-numeric: tabular-nums;
    background: linear-gradient(135deg, var(--text-primary), var(--primary));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
  .stat-label {
    font-size: 11px;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    margin-top: 4px;
  }

  /* Section */
  .section {
    margin-bottom: 48px;
  }
  .section-divider {
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--primary), transparent);
    margin: 48px 0;
    box-shadow: 0 0 12px rgba(139, 92, 246, 0.3);
  }

  /* Feature card */
  .feature-card {
    padding: 32px;
    margin-bottom: 24px;
    transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
  }
  .feature-card:hover {
    border-color: rgba(139, 92, 246, 0.3);
    box-shadow: 0 8px 40px rgba(0,0,0,0.3), 0 0 60px rgba(139, 92, 246, 0.06);
    transform: translateY(-2px);
  }

  .feature-header {
    display: flex;
    align-items: flex-start;
    gap: 16px;
    margin-bottom: 20px;
  }
  .feature-icon {
    width: 48px;
    height: 48px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 22px;
    flex-shrink: 0;
  }
  .feature-icon.green { background: rgba(34, 197, 94, 0.12); border: 1px solid rgba(34, 197, 94, 0.25); }
  .feature-icon.blue { background: rgba(59, 130, 246, 0.12); border: 1px solid rgba(59, 130, 246, 0.25); }
  .feature-icon.amber { background: rgba(245, 158, 11, 0.12); border: 1px solid rgba(245, 158, 11, 0.25); }
  .feature-icon.purple { background: rgba(139, 92, 246, 0.12); border: 1px solid rgba(139, 92, 246, 0.25); }
  .feature-icon.cyan { background: rgba(6, 182, 212, 0.12); border: 1px solid rgba(6, 182, 212, 0.25); }
  .feature-icon.red { background: rgba(239, 68, 68, 0.12); border: 1px solid rgba(239, 68, 68, 0.25); }

  .feature-title {
    font-size: 20px;
    font-weight: 700;
    margin-bottom: 4px;
  }
  .feature-id {
    font-size: 11px;
    color: var(--text-muted);
    font-weight: 600;
    letter-spacing: 0.05em;
    font-family: 'JetBrains Mono', monospace;
  }
  .feature-desc {
    color: var(--text-secondary);
    font-size: 14px;
    margin-bottom: 20px;
    line-height: 1.7;
  }

  /* Sub-sections */
  .sub-section {
    margin-bottom: 16px;
  }
  .sub-title {
    font-size: 11px;
    font-weight: 600;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    margin-bottom: 8px;
  }

  /* How to use list */
  .how-to-list {
    list-style: none;
    padding: 0;
  }
  .how-to-list li {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    padding: 8px 0;
    font-size: 13px;
    color: var(--text-secondary);
    line-height: 1.6;
  }
  .how-to-list li .step-num {
    width: 22px;
    height: 22px;
    border-radius: 6px;
    background: rgba(139, 92, 246, 0.15);
    border: 1px solid rgba(139, 92, 246, 0.3);
    color: var(--primary);
    font-size: 11px;
    font-weight: 700;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    margin-top: 2px;
    font-family: 'JetBrains Mono', monospace;
  }

  /* Tags */
  .tag-row {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    margin-top: 12px;
  }
  .tag {
    padding: 3px 10px;
    border-radius: 6px;
    font-size: 11px;
    font-weight: 500;
    font-family: 'JetBrains Mono', monospace;
  }
  .tag.files { background: rgba(59, 130, 246, 0.1); color: var(--neon-blue); border: 1px solid rgba(59, 130, 246, 0.2); }
  .tag.lines { background: rgba(34, 197, 94, 0.1); color: var(--neon-green); border: 1px solid rgba(34, 197, 94, 0.2); }
  .tag.route { background: rgba(139, 92, 246, 0.1); color: var(--primary); border: 1px solid rgba(139, 92, 246, 0.2); }

  /* Perf table */
  .perf-table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
    font-size: 13px;
    margin-top: 12px;
  }
  .perf-table th {
    text-align: left;
    padding: 10px 14px;
    font-size: 10px;
    font-weight: 600;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.08em;
    border-bottom: 1px solid rgba(255,255,255,0.06);
  }
  .perf-table td {
    padding: 10px 14px;
    color: var(--text-secondary);
    border-bottom: 1px solid rgba(255,255,255,0.03);
    font-variant-numeric: tabular-nums;
  }
  .perf-table tr:last-child td { border-bottom: none; }
  .perf-table .metric-name { color: var(--text-primary); font-weight: 500; }
  .perf-table .metric-value { font-family: 'JetBrains Mono', monospace; font-size: 12px; }
  .perf-table .metric-good { color: var(--neon-green); }
  .perf-table .metric-ok { color: var(--neon-amber); }

  /* Code block */
  code {
    font-family: 'JetBrains Mono', monospace;
    font-size: 12px;
    background: rgba(139, 92, 246, 0.08);
    padding: 2px 6px;
    border-radius: 4px;
    color: var(--primary-glow);
  }

  /* Nav diagram */
  .nav-diagram {
    display: flex;
    justify-content: center;
    gap: 8px;
    flex-wrap: wrap;
    padding: 20px;
    margin: 20px 0;
  }
  .nav-item {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 8px 14px;
    border-radius: 8px;
    font-size: 12px;
    font-weight: 500;
    transition: all 0.2s;
  }
  .nav-item.existing {
    background: rgba(255,255,255,0.04);
    border: 1px solid rgba(255,255,255,0.06);
    color: var(--text-secondary);
  }
  .nav-item.new {
    background: rgba(139, 92, 246, 0.1);
    border: 1px solid rgba(139, 92, 246, 0.3);
    color: var(--primary);
    box-shadow: 0 0 20px rgba(139, 92, 246, 0.08);
  }
  .nav-item .dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
  }
  .nav-item.new .dot { background: var(--primary); box-shadow: 0 0 8px var(--primary); }
  .nav-item.existing .dot { background: var(--text-muted); }

  /* Architecture grid */
  .arch-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
    gap: 12px;
    margin: 16px 0;
  }
  .arch-item {
    padding: 14px;
    text-align: center;
    font-size: 12px;
  }
  .arch-item .arch-count {
    font-size: 24px;
    font-weight: 700;
    font-variant-numeric: tabular-nums;
    color: var(--primary);
    margin-bottom: 4px;
  }
  .arch-item .arch-label {
    color: var(--text-muted);
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  /* Footer */
  .footer {
    text-align: center;
    padding: 40px 20px;
    color: var(--text-muted);
    font-size: 12px;
  }
  .footer .brand {
    font-weight: 700;
    background: linear-gradient(135deg, var(--text-primary), var(--primary));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  /* Responsive */
  @media (max-width: 768px) {
    .container { padding: 20px 16px 60px; }
    .feature-card { padding: 20px; }
    .stats-bar { gap: 20px; }
    .hero { padding: 40px 16px 40px; }
  }
</style>
</head>
<body>

<div class="ambient-glow purple"></div>
<div class="ambient-glow blue"></div>

<div class="container">

  <!-- Hero -->
  <div class="hero">
    <div class="hero-badge">V2 Feature Drop</div>
    <h1>Opta Local<br>7 New Features</h1>
    <p>Everything implemented, type-checked, built, and pushed to main in a single session.</p>
  </div>

  <!-- Stats -->
  <div class="stats-bar">
    <div class="stat-item">
      <div class="stat-value">7</div>
      <div class="stat-label">Features</div>
    </div>
    <div class="stat-item">
      <div class="stat-value">37</div>
      <div class="stat-label">Files Changed</div>
    </div>
    <div class="stat-item">
      <div class="stat-value">6,761</div>
      <div class="stat-label">Lines Added</div>
    </div>
    <div class="stat-item">
      <div class="stat-value">3</div>
      <div class="stat-label">New Routes</div>
    </div>
    <div class="stat-item">
      <div class="stat-value">0</div>
      <div class="stat-label">TS Errors</div>
    </div>
  </div>

  <!-- Navigation Update -->
  <div class="section">
    <div class="glass" style="padding: 24px;">
      <div class="sub-title" style="margin-bottom: 16px;">Updated Navigation</div>
      <div class="nav-diagram">
        <div class="nav-item existing"><span class="dot"></span> Dashboard</div>
        <div class="nav-item existing"><span class="dot"></span> Chat</div>
        <div class="nav-item new"><span class="dot"></span> Arena</div>
        <div class="nav-item new"><span class="dot"></span> RAG</div>
        <div class="nav-item new"><span class="dot"></span> Agents</div>
        <div class="nav-item existing"><span class="dot"></span> Sessions</div>
        <div class="nav-item existing"><span class="dot"></span> Settings</div>
      </div>
    </div>
  </div>

  <div class="section-divider"></div>

  <!-- F02: Heartbeat -->
  <div class="feature-card glass">
    <div class="feature-header">
      <div class="feature-icon green">&#x1F49A;</div>
      <div>
        <div class="feature-title">Connection Health Heartbeat</div>
        <div class="feature-id">F02 &mdash; Dashboard Enhancement</div>
      </div>
    </div>
    <div class="feature-desc">
      Real-time connection health monitoring with a pulsing indicator in the dashboard header. Pings the LMX server every 10 seconds and transitions through three visual states: green (healthy), amber (degraded, 1-2 failures), and red (unhealthy, 3+ consecutive failures). Includes a reconnection banner with manual retry.
    </div>

    <div class="sub-section">
      <div class="sub-title">How to Use</div>
      <ul class="how-to-list">
        <li><span class="step-num">1</span> Navigate to the <strong>Dashboard</strong> (home page)</li>
        <li><span class="step-num">2</span> Look at the pulsing dot next to the dashboard title &mdash; green means healthy</li>
        <li><span class="step-num">3</span> Hover over the dot to see precise latency (ms) and failure count</li>
        <li><span class="step-num">4</span> If connection drops, an amber banner appears with a <strong>Retry</strong> button</li>
      </ul>
    </div>

    <div class="sub-section">
      <div class="sub-title">Performance</div>
      <table class="perf-table">
        <tr><td class="metric-name">Ping interval</td><td class="metric-value">10s</td><td class="metric-good">Low overhead</td></tr>
        <tr><td class="metric-name">Ping timeout</td><td class="metric-value">3s</td><td>AbortController</td></tr>
        <tr><td class="metric-name">Failure threshold</td><td class="metric-value">3 consecutive</td><td>Prevents false positives</td></tr>
        <tr><td class="metric-name">Network overhead</td><td class="metric-value">~200B/req</td><td class="metric-good">HEAD-like GET</td></tr>
      </table>
    </div>

    <div class="tag-row">
      <span class="tag files">2 files created</span>
      <span class="tag files">2 files modified</span>
      <span class="tag route">/ (dashboard)</span>
    </div>
  </div>

  <!-- F03: Token Cost -->
  <div class="feature-card glass">
    <div class="feature-header">
      <div class="feature-icon amber">&#x26A1;</div>
      <div>
        <div class="feature-title">Token Cost Estimator</div>
        <div class="feature-id">F03 &mdash; Chat Enhancement</div>
      </div>
    </div>
    <div class="feature-desc">
      Running token counter with cloud cost comparison. Shows how much each conversation would cost on GPT-4o, Claude 3.5 Sonnet, and GPT-4 Turbo &mdash; reinforcing the value of running models locally. Expandable breakdown with per-provider costs.
    </div>

    <div class="sub-section">
      <div class="sub-title">How to Use</div>
      <ul class="how-to-list">
        <li><span class="step-num">1</span> Open any <strong>Chat</strong> session and start talking</li>
        <li><span class="step-num">2</span> A compact bar appears above the input showing <code>1,234 tokens</code> and <code>Saved ~$0.02 vs cloud</code></li>
        <li><span class="step-num">3</span> Click the bar to expand the per-provider cost breakdown</li>
        <li><span class="step-num">4</span> During streaming, a pulsing dot indicates tokens are accumulating</li>
      </ul>
    </div>

    <div class="sub-section">
      <div class="sub-title">Performance</div>
      <table class="perf-table">
        <tr><td class="metric-name">Token estimation</td><td class="metric-value">~4 chars/token</td><td>Industry standard heuristic</td></tr>
        <tr><td class="metric-name">Computation</td><td class="metric-value">useMemo</td><td class="metric-good">Re-computed only when messages change</td></tr>
        <tr><td class="metric-name">Render cost</td><td class="metric-value">~0.1ms</td><td class="metric-good">Pure display component</td></tr>
      </table>
    </div>

    <div class="sub-section">
      <div class="sub-title">Cloud Pricing Used</div>
      <table class="perf-table">
        <tr><th>Provider</th><th>Input $/1M</th><th>Output $/1M</th></tr>
        <tr><td class="metric-name">GPT-4o</td><td class="metric-value">$2.50</td><td class="metric-value">$10.00</td></tr>
        <tr><td class="metric-name">Claude 3.5 Sonnet</td><td class="metric-value">$3.00</td><td class="metric-value">$15.00</td></tr>
        <tr><td class="metric-name">GPT-4 Turbo</td><td class="metric-value">$10.00</td><td class="metric-value">$30.00</td></tr>
      </table>
    </div>

    <div class="tag-row">
      <span class="tag files">2 files created</span>
      <span class="tag files">1 file modified</span>
      <span class="tag route">/chat</span>
    </div>
  </div>

  <!-- F06: Arena Mode -->
  <div class="feature-card glass">
    <div class="feature-header">
      <div class="feature-icon purple">&#x2694;&#xFE0F;</div>
      <div>
        <div class="feature-title">Multi-Model Arena Mode</div>
        <div class="feature-id">F06 &mdash; New Route /arena</div>
      </div>
    </div>
    <div class="feature-desc">
      Send the same prompt to 2-3 models simultaneously and compare responses side-by-side in real-time. Rate which model wins, and build a personal preference dataset over time. This transforms Opta Local from a chat app into a model evaluation laboratory &mdash; something cloud services can't offer with user-owned hardware.
    </div>

    <div class="sub-section">
      <div class="sub-title">How to Use</div>
      <ul class="how-to-list">
        <li><span class="step-num">1</span> Navigate to <strong>Arena</strong> in the top nav</li>
        <li><span class="step-num">2</span> Select 2 or 3 loaded models from the toggle buttons</li>
        <li><span class="step-num">3</span> Type a prompt and press Enter &mdash; all models stream simultaneously</li>
        <li><span class="step-num">4</span> Once all responses finish, a rating bar appears: <strong>A Wins / B Wins / Tie</strong></li>
        <li><span class="step-num">5</span> Your votes persist in IndexedDB &mdash; check the stats table at the bottom</li>
      </ul>
    </div>

    <div class="sub-section">
      <div class="sub-title">Performance</div>
      <table class="perf-table">
        <tr><td class="metric-name">Parallel streaming</td><td class="metric-value">Promise.allSettled</td><td class="metric-good">One failure won't kill others</td></tr>
        <tr><td class="metric-name">Token appends</td><td class="metric-value">startTransition</td><td class="metric-good">Non-blocking UI updates</td></tr>
        <tr><td class="metric-name">Abort support</td><td class="metric-value">Per-channel</td><td>Independent AbortControllers</td></tr>
        <tr><td class="metric-name">VRAM impact</td><td class="metric-value">2-3x concurrent</td><td class="metric-ok">Requires loaded models</td></tr>
        <tr><td class="metric-name">Vote storage</td><td class="metric-value">IndexedDB</td><td class="metric-good">Offline-capable</td></tr>
      </table>
    </div>

    <div class="tag-row">
      <span class="tag files">5 files created</span>
      <span class="tag lines">~800 lines</span>
      <span class="tag route">/arena</span>
    </div>
  </div>

  <!-- F07: Clipboard -->
  <div class="feature-card glass">
    <div class="feature-header">
      <div class="feature-icon cyan">&#x1F4CB;</div>
      <div>
        <div class="feature-title">Smart Context from Clipboard</div>
        <div class="feature-id">F07 &mdash; Chat Enhancement</div>
      </div>
    </div>
    <div class="feature-desc">
      Paste code, JSON, URLs, or any text into the chat input and Opta automatically detects the content type and suggests relevant prompts. Detects 13 content types including Python, TypeScript, SQL, HTML, YAML, and more. Suggestions auto-dismiss after 10 seconds or when you start typing.
    </div>

    <div class="sub-section">
      <div class="sub-title">How to Use</div>
      <ul class="how-to-list">
        <li><span class="step-num">1</span> Copy any code, text, or URL to your clipboard</li>
        <li><span class="step-num">2</span> Paste it into the <strong>Chat</strong> input (Cmd+V)</li>
        <li><span class="step-num">3</span> A floating suggestion panel appears with context-aware prompts</li>
        <li><span class="step-num">4</span> Click a suggestion to auto-fill the prompt, or dismiss and type your own</li>
      </ul>
    </div>

    <div class="sub-section">
      <div class="sub-title">Detected Content Types</div>
      <table class="perf-table">
        <tr><th>Type</th><th>Detection</th><th>Example Suggestions</th></tr>
        <tr><td class="metric-name">Python</td><td class="metric-value">import/def/class/self</td><td>Review, Explain, Refactor, Find bugs</td></tr>
        <tr><td class="metric-name">TypeScript</td><td class="metric-value">interface/type/generics</td><td>Review, Explain, Add types, Test</td></tr>
        <tr><td class="metric-name">JSON</td><td class="metric-value">JSON.parse() attempt</td><td>Validate, Generate TS types, Format</td></tr>
        <tr><td class="metric-name">SQL</td><td class="metric-value">SELECT/INSERT/CREATE</td><td>Explain, Optimize, Find issues</td></tr>
        <tr><td class="metric-name">URL</td><td class="metric-value">https?:// regex</td><td>Summarize page, Explain, Analyze</td></tr>
        <tr><td class="metric-name">+ 8 more</td><td class="metric-value">JS, HTML, CSS, YAML, Shell, Markdown, Code, Text</td><td></td></tr>
      </table>
    </div>

    <div class="sub-section">
      <div class="sub-title">Performance</div>
      <table class="perf-table">
        <tr><td class="metric-name">Detection latency</td><td class="metric-value">300ms debounce</td><td class="metric-good">Prevents flash on rapid paste</td></tr>
        <tr><td class="metric-name">Auto-dismiss</td><td class="metric-value">10s timeout</td><td>Non-intrusive</td></tr>
        <tr><td class="metric-name">Heuristic layers</td><td class="metric-value">13 detectors</td><td>Ordered by specificity</td></tr>
      </table>
    </div>

    <div class="tag-row">
      <span class="tag files">2 files created</span>
      <span class="tag files">1 file modified</span>
      <span class="tag route">/chat</span>
    </div>
  </div>

  <!-- F09: Session Branching -->
  <div class="feature-card glass">
    <div class="feature-header">
      <div class="feature-icon blue">&#x1F500;</div>
      <div>
        <div class="feature-title">Session Branching (Fork Chat)</div>
        <div class="feature-id">F09 &mdash; Chat Enhancement</div>
      </div>
    </div>
    <div class="feature-desc">
      Fork any conversation at any message to explore alternative directions. Creates a new session with the messages up to the fork point, preserving the original. Includes a visual tree showing all branches, sibling navigation, and editable branch labels. Think git branches, but for conversations.
    </div>

    <div class="sub-section">
      <div class="sub-title">How to Use</div>
      <ul class="how-to-list">
        <li><span class="step-num">1</span> In any <strong>Chat</strong> session, hover over a message</li>
        <li><span class="step-num">2</span> Click the <strong>fork</strong> icon (branch icon) that appears in the top-right</li>
        <li><span class="step-num">3</span> You're navigated to a new session with messages up to that point</li>
        <li><span class="step-num">4</span> The original session shows a <strong>"View branches"</strong> button &mdash; click to see the tree</li>
        <li><span class="step-num">5</span> In the forked session, a <strong>branch indicator</strong> bar shows the parent and siblings</li>
        <li><span class="step-num">6</span> Click the pencil icon to rename your branch</li>
      </ul>
    </div>

    <div class="sub-section">
      <div class="sub-title">Performance</div>
      <table class="perf-table">
        <tr><td class="metric-name">Fork operation</td><td class="metric-value">~5ms</td><td class="metric-good">Message copy + metadata write</td></tr>
        <tr><td class="metric-name">Tree traversal</td><td class="metric-value">O(n) walks</td><td>Recursive up-then-down scan</td></tr>
        <tr><td class="metric-name">Storage</td><td class="metric-value">IndexedDB</td><td class="metric-good">Same backend as chat-store</td></tr>
        <tr><td class="metric-name">Branch metadata</td><td class="metric-value">~50B per branch</td><td>parentId + branchPoint + label</td></tr>
      </table>
    </div>

    <div class="tag-row">
      <span class="tag files">4 files created</span>
      <span class="tag files">2 files modified</span>
      <span class="tag route">/chat, /chat/[id]</span>
    </div>
  </div>

  <!-- F10: Agent Workspace -->
  <div class="feature-card glass">
    <div class="feature-header">
      <div class="feature-icon purple">&#x1F916;</div>
      <div>
        <div class="feature-title">Agent Workspace</div>
        <div class="feature-id">F10 &mdash; New Route /agents</div>
      </div>
    </div>
    <div class="feature-desc">
      Visual pipeline editor for multi-step AI workflows. Chain prompts across models with conditional logic and text transforms. Choose from built-in templates (Research &amp; Summarize, Code Review, Draft Email, Analyze &amp; Report) or build custom workflows. Execution streams in real-time with step-by-step progress.
    </div>

    <div class="sub-section">
      <div class="sub-title">How to Use</div>
      <ul class="how-to-list">
        <li><span class="step-num">1</span> Navigate to <strong>Agents</strong> in the top nav</li>
        <li><span class="step-num">2</span> Pick a <strong>template</strong> or click "New Workflow" to start from scratch</li>
        <li><span class="step-num">3</span> In the editor: add/remove steps, configure prompts, set models</li>
        <li><span class="step-num">4</span> Enter input text and click <strong>Execute</strong> to run the pipeline</li>
        <li><span class="step-num">5</span> Watch real-time execution on the right panel &mdash; each step lights up as it runs</li>
        <li><span class="step-num">6</span> Click <strong>Save</strong> to persist workflows for reuse</li>
      </ul>
    </div>

    <div class="sub-section">
      <div class="sub-title">Step Types</div>
      <table class="perf-table">
        <tr><th>Type</th><th>Icon</th><th>Purpose</th></tr>
        <tr><td class="metric-name">Prompt</td><td>&#x1F4AC;</td><td>Send to a model with system/user prompt templates</td></tr>
        <tr><td class="metric-name">Transform</td><td>&#x1F500;</td><td>Extract JSON, regex match, format text, split</td></tr>
        <tr><td class="metric-name">Conditional</td><td>&#x1F500;</td><td>Branch based on contains/length/regex/sentiment</td></tr>
        <tr><td class="metric-name">Output</td><td>&#x1F4C4;</td><td>Format final output (text/markdown/JSON/email)</td></tr>
      </table>
    </div>

    <div class="sub-section">
      <div class="sub-title">Performance</div>
      <table class="perf-table">
        <tr><td class="metric-name">Step execution</td><td class="metric-value">Sequential</td><td>Output feeds into next step's input</td></tr>
        <tr><td class="metric-name">Streaming</td><td class="metric-value">Real-time</td><td class="metric-good">Token-by-token UI updates</td></tr>
        <tr><td class="metric-name">Workflow storage</td><td class="metric-value">IndexedDB</td><td class="metric-good">Offline-capable</td></tr>
        <tr><td class="metric-name">Templates</td><td class="metric-value">4 built-in</td><td>Instantly instantiate</td></tr>
      </table>
    </div>

    <div class="tag-row">
      <span class="tag files">6 files created</span>
      <span class="tag lines">~1,200 lines</span>
      <span class="tag route">/agents</span>
    </div>
  </div>

  <!-- F11: RAG -->
  <div class="feature-card glass">
    <div class="feature-header">
      <div class="feature-icon green">&#x1F4DA;</div>
      <div>
        <div class="feature-title">RAG Over Local Files</div>
        <div class="feature-id">F11 &mdash; New Route /rag</div>
      </div>
    </div>
    <div class="feature-desc">
      Full-featured RAG (Retrieval-Augmented Generation) interface connecting to the existing LMX vector store backend. Create collections, ingest documents (paste text or drag-and-drop files), and query with vector/keyword/hybrid search. Results show relevance scores, source metadata, and expandable previews. Everything stays on your machine.
    </div>

    <div class="sub-section">
      <div class="sub-title">How to Use</div>
      <ul class="how-to-list">
        <li><span class="step-num">1</span> Navigate to <strong>RAG</strong> in the top nav</li>
        <li><span class="step-num">2</span> Click <strong>New Collection</strong> in the sidebar and name it (e.g., "project-docs")</li>
        <li><span class="step-num">3</span> In the <strong>Ingest</strong> tab: paste text or drag-and-drop <code>.md</code>, <code>.py</code>, <code>.ts</code> files</li>
        <li><span class="step-num">4</span> Optionally configure chunking strategy (auto/text/code), chunk size, and overlap</li>
        <li><span class="step-num">5</span> Click <strong>Ingest</strong> &mdash; see "Ingested X docs into Y chunks in Z ms"</li>
        <li><span class="step-num">6</span> Switch to <strong>Query</strong> tab, type a question, and see ranked results with scores</li>
        <li><span class="step-num">7</span> Toggle between Vector, Keyword, or Hybrid search modes</li>
      </ul>
    </div>

    <div class="sub-section">
      <div class="sub-title">Performance</div>
      <table class="perf-table">
        <tr><td class="metric-name">Backend</td><td class="metric-value">LMX VectorStore</td><td class="metric-good">Already running on Mac Studio</td></tr>
        <tr><td class="metric-name">Embedding</td><td class="metric-value">MLX native</td><td class="metric-good">GPU-accelerated on M3 Ultra</td></tr>
        <tr><td class="metric-name">Search modes</td><td class="metric-value">3 (vector/kw/hybrid)</td><td>BM25 + cosine similarity</td></tr>
        <tr><td class="metric-name">Collection refresh</td><td class="metric-value">SWR 30s</td><td>Auto-revalidation</td></tr>
        <tr><td class="metric-name">Optimistic delete</td><td class="metric-value">Instant UI</td><td class="metric-good">Rollback on error</td></tr>
        <tr><td class="metric-name">File formats</td><td class="metric-value">.txt .md .py .ts .js .rs .go +</td><td>Client-side FileReader</td></tr>
      </table>
    </div>

    <div class="tag-row">
      <span class="tag files">7 files created</span>
      <span class="tag files">1 file modified</span>
      <span class="tag lines">~1,500 lines</span>
      <span class="tag route">/rag</span>
    </div>
  </div>

  <div class="section-divider"></div>

  <!-- Architecture Summary -->
  <div class="section">
    <div class="glass" style="padding: 32px;">
      <div class="sub-title" style="margin-bottom: 16px;">Architecture Summary</div>
      <div class="arch-grid">
        <div class="arch-item glass-subtle">
          <div class="arch-count">7</div>
          <div class="arch-label">New Hooks</div>
        </div>
        <div class="arch-item glass-subtle">
          <div class="arch-count">12</div>
          <div class="arch-label">New Components</div>
        </div>
        <div class="arch-item glass-subtle">
          <div class="arch-count">3</div>
          <div class="arch-label">New Pages</div>
        </div>
        <div class="arch-item glass-subtle">
          <div class="arch-count">3</div>
          <div class="arch-label">New Stores</div>
        </div>
        <div class="arch-item glass-subtle">
          <div class="arch-count">2</div>
          <div class="arch-label">New Type Files</div>
        </div>
        <div class="arch-item glass-subtle">
          <div class="arch-count">5</div>
          <div class="arch-label">Modified Files</div>
        </div>
      </div>

      <div style="margin-top: 24px;">
        <div class="sub-title" style="margin-bottom: 12px;">Implementation Method</div>
        <div class="feature-desc" style="margin-bottom: 0;">
          All 7 features were implemented using <strong>5 parallel agents</strong> plus direct coding:
        </div>
        <table class="perf-table" style="margin-top: 8px;">
          <tr><th>Agent</th><th>Features</th><th>Duration</th><th>Tokens</th></tr>
          <tr><td class="metric-name">Agent 1</td><td>F02 Heartbeat + F03 Token Cost</td><td class="metric-value">~3.4 min</td><td class="metric-value">71K</td></tr>
          <tr><td class="metric-name">Agent 2</td><td>F07 Clipboard Context</td><td class="metric-value">~2.6 min</td><td class="metric-value">51K</td></tr>
          <tr><td class="metric-name">Agent 3</td><td>F06 Arena Mode</td><td class="metric-value">~4.4 min</td><td class="metric-value">62K</td></tr>
          <tr><td class="metric-name">Agent 4</td><td>F09 Session Branching</td><td class="metric-value">~3.7 min</td><td class="metric-value">74K</td></tr>
          <tr><td class="metric-name">Agent 5</td><td>F11 RAG UI</td><td class="metric-value">~6.7 min</td><td class="metric-value">97K</td></tr>
          <tr><td class="metric-name">Direct</td><td>F10 Agent Workspace</td><td class="metric-value">~2 min</td><td class="metric-value">&mdash;</td></tr>
        </table>
      </div>
    </div>
  </div>

  <div class="section-divider"></div>

  <!-- Build Verification -->
  <div class="section">
    <div class="glass" style="padding: 32px;">
      <div class="sub-title" style="margin-bottom: 16px;">Build Verification</div>
      <table class="perf-table">
        <tr><td class="metric-name">TypeScript (strict)</td><td class="metric-value metric-good">0 errors</td><td><code>npx tsc --noEmit</code></td></tr>
        <tr><td class="metric-name">Next.js Build</td><td class="metric-value metric-good">Passed</td><td><code>next build</code> &mdash; 1,969ms compile</td></tr>
        <tr><td class="metric-name">Static pages</td><td class="metric-value">10 routes</td><td>All pre-rendered successfully</td></tr>
        <tr><td class="metric-name">Dynamic pages</td><td class="metric-value">1 route</td><td><code>/chat/[id]</code></td></tr>
        <tr><td class="metric-name">Design system</td><td class="metric-value metric-good">Compliant</td><td>Glass, Sora, Lucide, Framer Motion</td></tr>
        <tr><td class="metric-name">Git</td><td class="metric-value metric-good">Committed + pushed</td><td><code>70b7e74</code> on main</td></tr>
      </table>
    </div>
  </div>

  <div class="footer">
    <span class="brand">Opta Local</span> &mdash; V2 Feature Guide &mdash; Feb 18, 2026
  </div>

</div>

</body>
</html>