---
phase: 01-web-project-setup
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - 1-Apps/1L-Opta-Local/web/package.json
  - 1-Apps/1L-Opta-Local/web/tsconfig.json
  - 1-Apps/1L-Opta-Local/web/postcss.config.mjs
  - 1-Apps/1L-Opta-Local/web/next.config.ts
  - 1-Apps/1L-Opta-Local/web/.gitignore
  - 1-Apps/1L-Opta-Local/web/src/app/globals.css
  - 1-Apps/1L-Opta-Local/web/src/app/layout.tsx
  - 1-Apps/1L-Opta-Local/web/src/app/page.tsx
  - pnpm-workspace.yaml
autonomous: true
---

<objective>
Scaffold Next.js 16 project with Opta glass design system, @opta/ui integration, and Tailwind CSS 4 design tokens.

Purpose: Create the foundational web project that all subsequent phases build upon — the Next.js 16 app shell with the full Opta visual identity.
Output: A running Next.js 16 dev server at localhost:3004 with Opta glass design system, @opta/ui components rendering correctly, and a smoke-test landing page.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-web-project-setup/01-RESEARCH.md

# Reference implementation (copy structure, deps, and design system):
@1-Apps/1B-AICompare-Web/package.json
@1-Apps/1B-AICompare-Web/tsconfig.json
@1-Apps/1B-AICompare-Web/postcss.config.mjs
@1-Apps/1B-AICompare-Web/next.config.ts
@1-Apps/1B-AICompare-Web/src/app/globals.css
@1-Apps/1B-AICompare-Web/src/app/layout.tsx

# Shared component library:
@6-Packages/6D-UI/src/index.ts
@6-Packages/6D-UI/package.json

# Platform-specific design specs:
@1-Apps/1L-Opta-Local/SHARED.md
@1-Apps/1L-Opta-Local/web/CLAUDE.md

# Workspace config:
@pnpm-workspace.yaml
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Next.js 16 project scaffold with workspace integration</name>
  <files>
    1-Apps/1L-Opta-Local/web/package.json,
    1-Apps/1L-Opta-Local/web/tsconfig.json,
    1-Apps/1L-Opta-Local/web/postcss.config.mjs,
    1-Apps/1L-Opta-Local/web/next.config.ts,
    1-Apps/1L-Opta-Local/web/.gitignore,
    pnpm-workspace.yaml
  </files>
  <action>
    Create the Next.js 16 project manually (do NOT use create-next-app — it would scaffold in a subdirectory and overwrite existing OPIS docs). Create each file to match AICompare Web's proven setup:

    **package.json:** Name `@opta/local-web`. Dependencies matching AICompare: next@16.1.6, react@19.2.3, react-dom@19.2.3, framer-motion@^12, lucide-react@^0.563, swr@^2.3, @opta/ui (workspace:*). DevDependencies: @tailwindcss/postcss@^4, @types/node, @types/react, @types/react-dom, typescript@^5, tailwindcss@^4. Scripts: dev (next dev -p 3004), build (next build), start (next start -p 3004), lint (next lint). Port 3004 avoids conflicts with other Opta web apps (3000=AICompare, 3001=Opta Life Web).

    **tsconfig.json:** Copy AICompare's config exactly — strict: true, target: ES2017, module: esnext, moduleResolution: bundler, jsx: react-jsx, paths: {"@/*": ["./src/*"]}, include/exclude matching AICompare. Include Next.js TypeScript plugin.

    **postcss.config.mjs:** Minimal Tailwind 4 config — `{ plugins: { "@tailwindcss/postcss": {} } }`. No autoprefixer needed (Tailwind 4 handles it).

    **next.config.ts:** Empty NextConfig matching AICompare. No custom config needed for v1.

    **.gitignore:** Standard Next.js ignores: .next/, node_modules/, out/, .env*.local, *.tsbuildinfo, next-env.d.ts.

    **pnpm-workspace.yaml:** Add `"1-Apps/1L-Opta-Local/web"` to the packages list.

    After creating all files, run `pnpm install` from monorepo root to link workspace dependencies.
  </action>
  <verify>
    cd 1-Apps/1L-Opta-Local/web && pnpm build
    (Build must succeed — confirms Next.js 16, TypeScript, Tailwind 4, and @opta/ui all resolve correctly)
  </verify>
  <done>
    - package.json exists with correct deps and port 3004
    - tsconfig.json matches AICompare (strict, bundler resolution)
    - postcss.config.mjs uses @tailwindcss/postcss
    - pnpm-workspace.yaml includes 1-Apps/1L-Opta-Local/web
    - pnpm install succeeds with @opta/ui linked
    - pnpm build succeeds without errors
  </done>
</task>

<task type="auto">
  <name>Task 2: Configure Opta glass design system and root layout</name>
  <files>
    1-Apps/1L-Opta-Local/web/src/app/globals.css,
    1-Apps/1L-Opta-Local/web/src/app/layout.tsx,
    1-Apps/1L-Opta-Local/web/src/app/page.tsx
  </files>
  <action>
    **globals.css:** Start with `@import "tailwindcss";` then create @theme block with design tokens. Map SHARED.md tokens to @opta/ui-compatible names:
    - --color-opta-bg: #09090b (SHARED.md --void)
    - --color-opta-surface: #18181b (SHARED.md --surface)
    - --color-opta-border: #3f3f46 (SHARED.md --border)
    - --color-primary: #8b5cf6 (SHARED.md --primary, violet-500)
    - --color-neon-cyan: #06b6d4 (status: connected)
    - --color-neon-green: #22c55e (status: online)
    - --color-neon-amber: #f59e0b (status: WAN mode)
    - --color-neon-red: #ef4444 (status: offline/error)
    - --font-sans: "Sora", system-ui, sans-serif
    - --font-mono: "SF Mono", "JetBrains Mono", monospace

    Also include glass-bg, glass-border, and glow tokens from AICompare's globals.css to ensure @opta/ui components render correctly. Add @layer utilities block with .glass, .glass-subtle, .glass-strong classes (copy from AICompare's proven implementation). Add @layer base for default body/html styles.

    IMPORTANT: Do NOT create a tailwind.config.js — Tailwind 4 uses @theme blocks in CSS only. Do NOT import from tailwind.config — tokens live in CSS.

    **layout.tsx:** Root layout with:
    - Sora font (next/font/google) as --font-sora CSS variable
    - JetBrains_Mono font as --font-jetbrains CSS variable
    - HTML lang="en", dark class
    - Body with bg-opta-bg, text-white, antialiased, min-h-screen
    - Metadata: title "Opta Local", description "Chat with your local AI from anywhere"
    - Import globals.css

    **page.tsx:** Smoke-test landing page that validates the design system works:
    - Import Card, Button, Badge from @opta/ui
    - Render a glass Card with title "Opta Local", a Badge showing "Offline" status, and a Button
    - Use 'use client' directive (components use client-side features)
    - This page proves: @opta/ui components render, glass effects display, design tokens apply, fonts load
  </action>
  <verify>
    cd 1-Apps/1L-Opta-Local/web && pnpm dev
    (Dev server starts on localhost:3004, page renders with glass effects, violet theme, Sora font)
  </verify>
  <done>
    - globals.css has @theme block with all SHARED.md tokens mapped to @opta/ui names
    - Glass utility classes (.glass, .glass-subtle, .glass-strong) render correctly
    - layout.tsx loads Sora + JetBrains Mono fonts
    - page.tsx renders @opta/ui Card (glass variant), Button, and Badge
    - No Tailwind config file exists (Tailwind 4 CSS-only)
    - pnpm build succeeds
  </done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `cd 1-Apps/1L-Opta-Local/web && pnpm build` succeeds without errors
- [ ] `pnpm dev` starts dev server on port 3004
- [ ] localhost:3004 renders the smoke-test page with glass effects
- [ ] @opta/ui Card, Button, Badge components display correctly
- [ ] Sora font loads (check devtools Network tab)
- [ ] No TypeScript errors (`pnpm tsc --noEmit`)
- [ ] No tailwind.config.js exists (Tailwind 4 CSS-only pattern)
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- No errors or warnings introduced
- Next.js 16 dev server runs on port 3004
- @opta/ui workspace dependency resolves and components render
- Glass design system displays correctly with violet theme on OLED-black background
- Design tokens from SHARED.md are accessible as Tailwind utilities
</success_criteria>

<output>
After completion, create `.planning/phases/01-web-project-setup/01-01-SUMMARY.md`
</output>
