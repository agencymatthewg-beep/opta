# Opta-LMX Default Configuration
# Copy to ~/.opta-lmx/config.yaml and customize

server:
  host: "127.0.0.1"
  port: 1234
  workers: 1
  timeout_sec: 300

models:
  default_model: null
  models_directory: "/Users/Shared/Opta-LMX/models"
  auto_load: []
  use_batching: true
  max_concurrent_requests: 4   # Limits parallel inference to prevent OOM
  inference_timeout_sec: 300   # Max seconds per inference request
  warmup_on_load: true         # Prime JIT/Metal shaders after model load
  download_free_space_floor_gb: 5.0           # Hard floor before any download starts
  download_estimate_margin_ratio: 1.10        # Estimated-size safety margin
  max_concurrent_downloads: 1                 # Recommended: keep downloads single-flight
  incomplete_artifact_sweeper_enabled: true
  incomplete_artifact_sweeper_interval_sec: 1800.0
  incomplete_artifact_min_age_sec: 1800.0

memory:
  max_memory_percent: 90
  auto_evict_lru: true

logging:
  level: "INFO"
  format: "structured"
  file: null
  max_file_bytes: 52428800   # 50MB
  backup_count: 5

security:
  admin_key: null  # Set to a string to require X-Admin-Key header on /admin/* endpoints
