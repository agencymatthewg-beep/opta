---
phase: 42-hardware-synergy-database
plan: 03
type: execute
wave: 2
depends_on: ["42-01"]
files_modified: [.planning/research/knowledge/synergies/bottlenecks/memory-bandwidth.json]
autonomous: true
---

<objective>
Create memory bandwidth impact calculations for the Hardware Synergy Database.

Purpose: Document how memory bandwidth affects performance across different Apple Silicon configurations, particularly focusing on UMA characteristics and the relationship between memory capacity, bandwidth, and workload types.

Output:
- `memory-bandwidth.json` - Memory bandwidth synergy/bottleneck data for M-series chips
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/research/knowledge/schema/synergy-schema.json
@.planning/research/knowledge/synergies/README.md
@.planning/research/knowledge/t2-architecture/apple-silicon.json
@.planning/research/knowledge/t3-specs/m-series.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create memory bandwidth impact data</name>
  <files>.planning/research/knowledge/synergies/bottlenecks/memory-bandwidth.json</files>
  <action>
Create a JSON file following synergy-schema.json with memory bandwidth interactions.

Include entries for:

1. **UMA Synergies** (Apple Silicon advantages):
   - Zero-copy GPU texture access benefit
   - Shared memory pool efficiency
   - No PCIe transfer overhead
   - Media Engine zero-copy decode

2. **Memory Bandwidth Bottlenecks**:
   - VRAM pressure scenarios (when unified memory < recommended for workload)
   - Bandwidth saturation (high-resolution textures, 4K rendering)
   - Memory swapping impact on gaming
   - Multi-app memory contention

3. **Bandwidth Tiers by Chip**:
   - Base chips (M1/M2/M3/M4): 68-120 GB/s
   - Pro chips: 200 GB/s
   - Max chips: 400 GB/s
   - Ultra chips: 800 GB/s

4. **Workload-specific impacts**:
   - Gaming at 1080p vs 1440p vs 4K
   - Video editing (ProRes, 8K)
   - 3D rendering (large scenes)
   - ML training (large models)

For each entry include:
- Conditions (memory_usage, resolution, workload_type)
- Impact formula where calculable
- Applicable chips with their bandwidth tiers
- Confidence based on source

Reference:
- t2-architecture/apple-silicon.json: UMA, zero-copy patterns
- t3-specs/m-series.json: Bandwidth specs per chip

Target: 15-20 memory-related interaction entries.
  </action>
  <verify>cat .planning/research/knowledge/synergies/bottlenecks/memory-bandwidth.json | python3 -c "import json,sys; d=json.load(sys.stdin); print(f'Valid JSON with {len(d.get(\"entries\", []))} entries')"</verify>
  <done>memory-bandwidth.json exists with 15+ memory interaction entries covering UMA synergies and bottlenecks</done>
</task>

<task type="auto">
  <name>Task 2: Add memory recommendation heuristics</name>
  <files>.planning/research/knowledge/synergies/bottlenecks/memory-bandwidth.json</files>
  <action>
Add a `heuristics` section with practical memory optimization guidance:

```json
"heuristics": [
  {
    "id": "memory-pressure-detection",
    "name": "Memory Pressure Detection",
    "description": "How to detect when unified memory is limiting performance",
    "indicators": [
      "Memory pressure indicator in Activity Monitor shows yellow/red",
      "Swap usage > 0 during gaming",
      "Frame time spikes correlating with memory operations",
      "Texture pop-in visible in games"
    ],
    "remediation": [
      "Close background applications (browsers, Electron apps)",
      "Reduce texture quality in game settings",
      "Lower resolution if memory-bound",
      "Check for memory leaks in long-running apps"
    ]
  },
  ...
]
```

Include heuristics for:
- Memory pressure detection
- Bandwidth saturation detection
- Optimal memory allocation by workload
- VRAM estimation for games (since UMA doesn't have dedicated VRAM)

Add a `memoryTiers` section documenting recommended memory for workloads:
```json
"memoryTiers": {
  "casual-gaming-1080p": { "minimum": 8, "recommended": 16, "unit": "GB" },
  "serious-gaming-1440p": { "minimum": 16, "recommended": 24, "unit": "GB" },
  "4k-gaming": { "minimum": 24, "recommended": 32, "unit": "GB" },
  "video-editing-4k": { "minimum": 16, "recommended": 32, "unit": "GB" },
  "3d-rendering": { "minimum": 32, "recommended": 64, "unit": "GB" }
}
```
  </action>
  <verify>cat .planning/research/knowledge/synergies/bottlenecks/memory-bandwidth.json | python3 -c "import json,sys; d=json.load(sys.stdin); print(f'Has heuristics: {\"heuristics\" in d}, Has memoryTiers: {\"memoryTiers\" in d}')"</verify>
  <done>memory-bandwidth.json includes heuristics and memoryTiers sections</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] memory-bandwidth.json is valid JSON
- [ ] Contains 15+ memory-related entries
- [ ] Includes UMA synergies and bottleneck scenarios
- [ ] Heuristics provide detection and remediation
- [ ] Memory tier recommendations included
</verification>

<success_criteria>
- All tasks completed
- Memory data covers synergies (UMA benefits) and bottlenecks
- Bandwidth tiers documented for all M-series chips
- Practical heuristics for memory optimization
</success_criteria>

<output>
After completion, create `.planning/phases/42-hardware-synergy-database/42-03-SUMMARY.md`
</output>
