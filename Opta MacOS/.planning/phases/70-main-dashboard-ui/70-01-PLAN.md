---
phase: 70-main-dashboard-ui
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - opta-native/OptaApp/OptaApp/Views/DashboardView.swift
  - opta-native/OptaApp/OptaApp/Views/Components/TelemetryCard.swift
  - opta-native/OptaApp/OptaApp/Views/Components/ScoreDisplay.swift
  - opta-native/OptaApp/OptaApp/Views/Components/QuickActions.swift
autonomous: true
---

<objective>
Build the main DashboardView with telemetry cards, Opta Score display, and quick action buttons.

Purpose: Create the primary optimization interface showing real-time system health via OptaCoreManager's reactive ViewModel.
Output: DashboardView with CPU/Memory/GPU cards, animated score display, and optimization quick actions.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

**Phase 69 foundation:**
@.planning/phases/69-opta-core-integration/69-02-SUMMARY.md

**Existing app structure:**
@opta-native/OptaApp/OptaApp/OptaAppApp.swift
@opta-native/OptaApp/OptaApp/Managers/OptaCoreManager.swift
@opta-native/OptaApp/OptaApp/Models/OptaViewModel.swift
@opta-native/OptaApp/OptaApp/ContentView.swift

**Opta design reference:**
- Use OLED-optimized background (#09090B not pure black)
- Purple accent gradient (#8B5CF6 → #A855F7)
- Glass card effects with .ultraThinMaterial
- SF Pro system font with Dynamic Type
- Spring animations (response: 0.3, damping: 0.7)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create TelemetryCard reusable component</name>
  <files>opta-native/OptaApp/OptaApp/Views/Components/TelemetryCard.swift</files>
  <action>
Create a reusable TelemetryCard component for CPU, Memory, GPU displays:

1. Accept parameters: title, value (Float 0-100), icon (SF Symbol), color, history ([Float])
2. Display:
   - Title with SF Symbol icon
   - Large percentage value with animation
   - Mini sparkline chart showing history (last 30 values)
   - Color-coded indicator (green < 60%, yellow 60-85%, red > 85%)
3. Use glass card styling:
   - .ultraThinMaterial background
   - Corner radius 16
   - Subtle border (white 0.1 opacity)
   - Shadow for depth
4. Animate value changes with .contentTransition(.numericText())
5. Support Reduce Motion preference
6. Create Components/ directory if not exists

Key: Use GeometryReader for responsive sparkline sizing. Chart should be ~40pt height.
  </action>
  <verify>
```bash
cd /Users/matthewbyrden/Documents/Opta/opta-native/OptaApp && swiftc -typecheck OptaApp/Views/Components/TelemetryCard.swift -sdk $(xcrun --show-sdk-path) 2>&1 | head -20
```
Expected: No errors (or only expected import errors)
  </verify>
  <done>TelemetryCard component exists with glass styling and sparkline</done>
</task>

<task type="auto">
  <name>Task 2: Create ScoreDisplay component</name>
  <files>opta-native/OptaApp/OptaApp/Views/Components/ScoreDisplay.swift</files>
  <action>
Create the Opta Score display component:

1. Accept parameters: score (UInt8 0-100), grade (String), isCalculating (Bool), animation (Float)
2. Display:
   - Large score number with animated counting
   - Grade badge (S/A/B/C/D/F) with color coding
   - Circular progress ring showing score percentage
   - Pulsing animation when calculating
3. Score ring styling:
   - Outer ring with gradient (#8B5CF6 → #A855F7)
   - Inner score text (48pt semibold)
   - Grade badge below with glass background
4. Grade colors:
   - S: Gold gradient
   - A: Green
   - B: Cyan
   - C: Yellow
   - D: Orange
   - F: Red
5. Use spring animation for score counting (0 → target)
6. Respect Reduce Motion for pulsing

Key: Use Canvas or Path for the circular ring. Score should animate when optaScore changes.
  </action>
  <verify>
```bash
cd /Users/matthewbyrden/Documents/Opta/opta-native/OptaApp && ls -la OptaApp/Views/Components/ScoreDisplay.swift
```
Expected: File exists
  </verify>
  <done>ScoreDisplay component with animated ring and grade badge</done>
</task>

<task type="auto">
  <name>Task 3: Create QuickActions and DashboardView</name>
  <files>
opta-native/OptaApp/OptaApp/Views/Components/QuickActions.swift
opta-native/OptaApp/OptaApp/Views/DashboardView.swift
  </files>
  <action>
**QuickActions.swift:**
1. Create quick action button bar:
   - Optimize Now (bolt.fill) - triggers stealth mode
   - Scan Games (gamecontroller.fill) - triggers game scan
   - View Score (chart.bar.fill) - navigates to score detail
2. Use horizontal stack with equal width buttons
3. Glass button styling with hover/press states
4. Wire to OptaCoreManager events:
   - optimize: coreManager.dispatch(.stealthModeToggle)
   - scan: coreManager.dispatch(.scanGames)
   - score: coreManager.dispatch(.navigate(to: .score))

**DashboardView.swift:**
1. Main dashboard layout using VStack/HStack:
   - Top: ScoreDisplay (centered)
   - Middle: 3-column telemetry cards (CPU, Memory, GPU)
   - Bottom: QuickActions bar
2. Use @State var coreManager = OptaCoreManager()
3. Bind all values from coreManager.viewModel:
   - cpuUsage, memoryUsage, gpuUsage
   - cpuHistory, memoryHistory, gpuHistory
   - optaScore, scoreGrade, scoreCalculating
   - stealthModeActive
4. Background: Color(hex: "09090B") for OLED optimization
5. Padding 24pt from edges
6. Responsive layout using GeometryReader

Key: DashboardView is the primary view replacing ContentView for dashboard navigation.
  </action>
  <verify>
```bash
cd /Users/matthewbyrden/Documents/Opta/opta-native/OptaApp && ls -la OptaApp/Views/DashboardView.swift OptaApp/Views/Components/QuickActions.swift
```
Expected: Both files exist
  </verify>
  <done>DashboardView with telemetry cards, score display, and quick actions</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] TelemetryCard.swift exists with glass styling and sparkline chart
- [ ] ScoreDisplay.swift exists with animated ring and grade badge
- [ ] QuickActions.swift exists with three action buttons
- [ ] DashboardView.swift exists composing all components
- [ ] All components use OptaCoreManager.viewModel bindings
- [ ] OLED background color (#09090B) used
- [ ] Spring animations applied to value changes
</verification>

<success_criteria>
- TelemetryCard displays CPU/Memory/GPU with sparklines
- ScoreDisplay shows animated Opta Score with grade
- QuickActions triggers CoreManager events
- DashboardView composes all components with proper layout
- Glass styling applied per Opta design system
</success_criteria>

<output>
After completion, create `.planning/phases/70-main-dashboard-ui/70-01-SUMMARY.md`
</output>
